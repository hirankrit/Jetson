# ‡∏ó‡∏§‡∏©‡∏é‡∏µ‡πÅ‡∏•‡∏∞‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£ Stereo Vision
## ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö Pepper Sorting Robot

**‡∏ú‡∏π‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏á**: ‡∏£‡∏∞‡∏ö‡∏ö Pepper Sorting Robot Project
**‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå**: ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
**‡∏£‡∏∞‡∏î‡∏±‡∏ö**: ‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤‡∏ï‡∏£‡∏µ-‡πÇ‡∏ó ‡∏™‡∏≤‡∏Ç‡∏≤ Computer Vision / Robotics

---

# ‡∏™‡∏≤‡∏£‡∏ö‡∏±‡∏ç

## ‡∏†‡∏≤‡∏Ñ‡∏ó‡∏§‡∏©‡∏é‡∏µ
- [‡∏ö‡∏ó‡∏ó‡∏µ‡πà 1: ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ Stereo Vision](#‡∏ö‡∏ó‡∏ó‡∏µ‡πà-1-‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥-stereo-vision)
- [‡∏ö‡∏ó‡∏ó‡∏µ‡πà 2: Camera Model ‡πÅ‡∏•‡∏∞ Pinhole Camera](#‡∏ö‡∏ó‡∏ó‡∏µ‡πà-2-camera-model-‡πÅ‡∏•‡∏∞-pinhole-camera)
- [‡∏ö‡∏ó‡∏ó‡∏µ‡πà 3: Camera Calibration](#‡∏ö‡∏ó‡∏ó‡∏µ‡πà-3-camera-calibration)
- [‡∏ö‡∏ó‡∏ó‡∏µ‡πà 4: Stereo Geometry ‡πÅ‡∏•‡∏∞ Epipolar Geometry](#‡∏ö‡∏ó‡∏ó‡∏µ‡πà-4-stereo-geometry-‡πÅ‡∏•‡∏∞-epipolar-geometry)
- [‡∏ö‡∏ó‡∏ó‡∏µ‡πà 5: Stereo Rectification](#‡∏ö‡∏ó‡∏ó‡∏µ‡πà-5-stereo-rectification)
- [‡∏ö‡∏ó‡∏ó‡∏µ‡πà 6: Disparity ‡πÅ‡∏•‡∏∞ Depth Estimation](#‡∏ö‡∏ó‡∏ó‡∏µ‡πà-6-disparity-‡πÅ‡∏•‡∏∞-depth-estimation)
- [‡∏ö‡∏ó‡∏ó‡∏µ‡πà 7: Stereo Matching Algorithms](#‡∏ö‡∏ó‡∏ó‡∏µ‡πà-7-stereo-matching-algorithms)
- [‡∏ö‡∏ó‡∏ó‡∏µ‡πà 8: ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô](#‡∏ö‡∏ó‡∏ó‡∏µ‡πà-8-‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)

## ‡∏†‡∏≤‡∏Ñ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥
- [‡∏†‡∏≤‡∏Ñ‡∏ú‡∏ô‡∏ß‡∏Å ‡∏Å: ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î Python](#‡∏†‡∏≤‡∏Ñ‡∏ú‡∏ô‡∏ß‡∏Å-‡∏Å-‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î-python)
- [‡∏†‡∏≤‡∏Ñ‡∏ú‡∏ô‡∏ß‡∏Å ‡∏Ç: ‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á](#‡∏†‡∏≤‡∏Ñ‡∏ú‡∏ô‡∏ß‡∏Å-‡∏Ç-‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á)
- [‡∏†‡∏≤‡∏Ñ‡∏ú‡∏ô‡∏ß‡∏Å ‡∏Ñ: ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î](#‡∏†‡∏≤‡∏Ñ‡∏ú‡∏ô‡∏ß‡∏Å-‡∏Ñ-‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î)

---

# ‡∏ö‡∏ó‡∏ó‡∏µ‡πà 1: ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ Stereo Vision

## 1.1 ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏≤

### ‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå

‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏£‡∏π‡πâ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∂‡∏Å (depth perception) ‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏ï‡∏≤‡∏™‡∏≠‡∏á‡∏Ç‡πâ‡∏≤‡∏á ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏Ç‡πâ‡∏≤‡∏á‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏™‡∏°‡∏≠‡∏á‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á 3 ‡∏°‡∏¥‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥

**‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô**:
- ‡∏ï‡∏≤‡∏ã‡πâ‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏ï‡∏≤‡∏Ç‡∏ß‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏´‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 6-7 ‡πÄ‡∏ã‡∏ô‡∏ï‡∏¥‡πÄ‡∏°‡∏ï‡∏£ (baseline)
- ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏≤‡πÄ‡∏´‡πá‡∏ô‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å‡∏°‡∏∏‡∏°‡∏°‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ (binocular disparity)
- ‡∏™‡∏°‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏•‡∏≠‡∏á**:
```
‡∏•‡∏≠‡∏á‡∏ä‡∏π‡∏ô‡∏¥‡πâ‡∏ß‡∏ä‡∏µ‡πâ‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤ ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô:
1. ‡∏õ‡∏¥‡∏î‡∏ï‡∏≤‡∏ã‡πâ‡∏≤‡∏¢ ‚Üí ‡πÄ‡∏´‡πá‡∏ô‡∏ô‡∏¥‡πâ‡∏ß‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á
2. ‡∏õ‡∏¥‡∏î‡∏ï‡∏≤‡∏Ç‡∏ß‡∏≤ ‚Üí ‡πÄ‡∏´‡πá‡∏ô‡∏ô‡∏¥‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (disparity)
3. ‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡∏≠‡∏á‡∏ï‡∏≤ ‚Üí ‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∂‡∏Å (depth)

‡∏¢‡∏¥‡πà‡∏á‡∏ô‡∏¥‡πâ‡∏ß‡πÉ‡∏Å‡∏•‡πâ ‚Üí disparity ‡∏°‡∏≤‡∏Å
‡∏¢‡∏¥‡πà‡∏á‡∏ô‡∏¥‡πâ‡∏ß‡πÑ‡∏Å‡∏• ‚Üí disparity ‡∏ô‡πâ‡∏≠‡∏¢
```

### Stereo Vision ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå

**Stereo Vision** ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏™‡∏≤‡∏°‡∏°‡∏¥‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå‡∏°‡∏≤‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏™‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÅ‡∏ó‡∏ô‡∏ï‡∏≤‡∏™‡∏≠‡∏á‡∏Ç‡πâ‡∏≤‡∏á

**‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô**:
1. **‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ã‡πâ‡∏≤‡∏¢ (Left Camera)**: ‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢
2. **‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏Ç‡∏ß‡∏≤ (Right Camera)**: ‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤
3. **Baseline (b)**: ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á
4. **‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•**: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏†‡∏≤‡∏û‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á

```
      Camera L          Camera R
          üëÅÔ∏è                üëÅÔ∏è
          ‚îÇ                ‚îÇ
          ‚Üì                ‚Üì
      Image L          Image R
          ‚ï≤              ‚ï±
           ‚ï≤            ‚ï±
            ‚ï≤          ‚ï±
             ‚Üì        ‚Üì
          Stereo Matching
                 ‚Üì
            Disparity Map
                 ‚Üì
             Depth Map (3D)
```

## 1.2 ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î

### ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ ‚úÖ

1. **Passive Sensing**
   - ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ (‡πÄ‡∏ä‡πà‡∏ô laser, infrared)
   - ‡πÉ‡∏ä‡πâ‡πÅ‡∏™‡∏á‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏™‡∏á‡∏™‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
   - ‡πÑ‡∏°‡πà‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏∑‡πà‡∏ô

2. **‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ï‡πà‡∏≥**
   - ‡πÉ‡∏ä‡πâ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤ (‡∏ñ‡∏π‡∏Å‡∏Å‡∏ß‡πà‡∏≤ LiDAR, ToF)
   - ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏¥‡∏ï‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏≤‡∏Å

3. **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô (Dense)**
   - ‡πÑ‡∏î‡πâ depth ‡∏ó‡∏∏‡∏Å pixel (dense depth map)
   - ‡πÄ‡∏´‡πá‡∏ô‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ú‡∏¥‡∏ß‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏

4. **‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ**
   - ‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á
   - Scale ‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô baseline, focal length)

### ‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î ‚ö†Ô∏è

1. **‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ Texture**
   - ‡∏û‡∏∑‡πâ‡∏ô‡∏ú‡∏¥‡∏ß‡πÄ‡∏£‡∏µ‡∏¢‡∏ö ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏•‡∏≤‡∏¢ ‚Üí matching ‡∏¢‡∏≤‡∏Å
   - ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™, ‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡πÅ‡∏™‡∏á ‚Üí ‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÑ‡∏î‡πâ

2. **Occlusion (‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏á)**
   - ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÄ‡∏´‡πá‡∏ô ‡πÅ‡∏ï‡πà‡∏≠‡∏µ‡∏Å‡∏ï‡∏±‡∏ß‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô ‚Üí ‡πÑ‡∏°‡πà‡∏°‡∏µ depth
   - Edge ‡πÅ‡∏•‡∏∞ center ‡∏°‡∏µ occlusion ‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô (‡∏î‡∏±‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏ö‡πÉ‡∏ô Week 1!)

3. **Computational Cost**
   - Stereo matching ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏°‡∏≤‡∏Å
   - Trade-off ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥

4. **Baseline vs. Range Trade-off**
   - Baseline ‡πÄ‡∏•‡πá‡∏Å ‚Üí ‡∏ß‡∏±‡∏î‡∏£‡∏∞‡∏¢‡∏∞‡πÑ‡∏Å‡∏•‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥
   - Baseline ‡πÉ‡∏´‡∏ç‡πà ‚Üí occlusion ‡πÄ‡∏¢‡∏≠‡∏∞, matching ‡∏¢‡∏≤‡∏Å

5. **‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏à‡∏≤‡∏Å‡πÅ‡∏™‡∏á**
   - ‡πÅ‡∏™‡∏á‡πÑ‡∏°‡πà‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠ ‚Üí ‡∏†‡∏≤‡∏û‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô ‚Üí matching ‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
   - ‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÅ‡∏™‡∏á‡πÉ‡∏´‡πâ‡∏î‡∏µ

## 1.3 ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### 1. Robotics
- **Navigation**: ‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå‡πÄ‡∏î‡∏¥‡∏ô‡∏´‡∏•‡∏ö‡∏´‡∏•‡∏µ‡∏Å‡∏™‡∏¥‡πà‡∏á‡∏Å‡∏µ‡∏î‡∏Ç‡∏ß‡∏≤‡∏á
- **Manipulation**: ‡∏Ñ‡∏µ‡∏ö‡∏à‡∏±‡∏ö‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡πâ‡∏ß‡∏¢‡πÅ‡∏Ç‡∏ô‡∏Å‡∏•
- **Sorting**: ‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏ï‡∏≤‡∏°‡∏Ç‡∏ô‡∏≤‡∏î/‡∏£‡∏π‡∏õ‡∏£‡πà‡∏≤‡∏á (‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ô‡∏µ‡πâ!)

### 2. Autonomous Vehicles
- **Obstacle Detection**: ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏£‡∏ñ‡∏Ñ‡∏±‡∏ô, ‡∏Ñ‡∏ô‡πÄ‡∏î‡∏¥‡∏ô, ‡∏™‡∏¥‡πà‡∏á‡∏Å‡∏µ‡∏î‡∏Ç‡∏ß‡∏≤‡∏á
- **Lane Detection**: ‡∏´‡∏≤‡πÄ‡∏™‡πâ‡∏ô‡πÅ‡∏ö‡πà‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á
- **Parking Assistance**: ‡∏ä‡πà‡∏ß‡∏¢‡∏à‡∏≠‡∏î‡∏£‡∏ñ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

### 3. Augmented Reality (AR)
- **Depth Sensing**: ‡∏£‡∏π‡πâ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏≤‡∏á‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏ virtual
- **Occlusion**: ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏à‡∏£‡∏¥‡∏á‡∏ö‡∏±‡∏á‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏ virtual ‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

### 4. 3D Reconstruction
- **3D Scanning**: ‡∏™‡πÅ‡∏Å‡∏ô‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏°‡πÄ‡∏î‡∏• 3D
- **Cultural Heritage**: ‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏°‡∏£‡∏î‡∏Å‡∏ó‡∏≤‡∏á‡∏ß‡∏±‡∏í‡∏ô‡∏ò‡∏£‡∏£‡∏°
- **Medical Imaging**: ‡∏†‡∏≤‡∏û 3D ‡∏Ç‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏Ç‡∏≠‡∏á‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢

### 5. Industrial Inspection
- **Quality Control**: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î, ‡∏£‡∏π‡∏õ‡∏£‡πà‡∏≤‡∏á
- **Defect Detection**: ‡∏´‡∏≤‡∏ï‡∏≥‡∏´‡∏ô‡∏¥‡∏ö‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ú‡∏¥‡∏ß
- **Measurement**: ‡∏ß‡∏±‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥

## 1.4 ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° Pipeline

```
Input: ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ã‡πâ‡∏≤‡∏¢ + ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏Ç‡∏ß‡∏≤
  ‚îÇ
  ‚îú‚îÄ‚Üí [1. Camera Calibration]
  ‚îÇ     ‚îî‚îÄ‚Üí Camera parameters (K, D, R, T)
  ‚îÇ
  ‚îú‚îÄ‚Üí [2. Image Rectification]
  ‚îÇ     ‚îî‚îÄ‚Üí Aligned images (epipolar lines horizontal)
  ‚îÇ
  ‚îú‚îÄ‚Üí [3. Stereo Matching]
  ‚îÇ     ‚îî‚îÄ‚Üí Disparity map (pixel shift)
  ‚îÇ
  ‚îú‚îÄ‚Üí [4. Depth Computation]
  ‚îÇ     ‚îî‚îÄ‚Üí Depth map (metric distance)
  ‚îÇ
  ‚îî‚îÄ‚Üí [5. 3D Reconstruction]
        ‚îî‚îÄ‚Üí Point cloud (X, Y, Z)
```

**‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏à‡∏∞‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÇ‡∏î‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÉ‡∏ô‡∏ö‡∏ó‡∏ñ‡∏±‡∏î‡πÑ‡∏õ**

---

# ‡∏ö‡∏ó‡∏ó‡∏µ‡πà 2: Camera Model ‡πÅ‡∏•‡∏∞ Pinhole Camera

## 2.1 Pinhole Camera Model

### ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô

**Pinhole Camera** (‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏£‡∏π‡πÄ‡∏Ç‡πá‡∏°) ‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏ó‡∏≤‡∏á‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏á‡πà‡∏≤‡∏¢

**‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£**:
- ‡πÅ‡∏™‡∏á‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏ú‡πà‡∏≤‡∏ô‡∏£‡∏π‡πÄ‡∏•‡πá‡∏Å‡πÜ (pinhole) ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
- ‡∏â‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡∏•‡∏á‡∏ö‡∏ô‡πÅ‡∏ú‡πà‡∏ô‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏û (image plane)
- ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏∞‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏±‡∏ß (inverted)

```
World Coordinate (3D)         Image Coordinate (2D)

       P (X, Y, Z)
         ‚îÇ
         ‚îÇ  ‚ï± Ray of light
         ‚îÇ‚ï±
        ‚ï±‚îÇ
       ‚ï± ‚îÇ
      ‚ï±  ‚îÇ
     ‚îå‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îê
     ‚îÇ   O   ‚îÇ  ‚Üê Pinhole (optical center)
     ‚îî‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ‚ï≤
         ‚îÇ ‚ï≤
         ‚îÇ  ‚ï≤
        ‚ï±    ‚ï≤
       ‚îÇ      ‚ï≤
    Image      p (x, y)
    Plane       ‚Üë
             Image point
```

### ‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå

**World Coordinate System (‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÇ‡∏•‡∏Å)**:
- (X, Y, Z): ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡πÉ‡∏ô‡πÇ‡∏•‡∏Å 3 ‡∏°‡∏¥‡∏ï‡∏¥
- ‡∏´‡∏ô‡πà‡∏ß‡∏¢: ‡πÄ‡∏°‡∏ï‡∏£, ‡πÄ‡∏ã‡∏ô‡∏ï‡∏¥‡πÄ‡∏°‡∏ï‡∏£, ‡∏°‡∏¥‡∏•‡∏•‡∏¥‡πÄ‡∏°‡∏ï‡∏£

**Camera Coordinate System (‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á)**:
- (Xc, Yc, Zc): ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏õ‡∏•‡∏á‡∏°‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á
- Origin (0, 0, 0) = Optical center
- Z-axis = ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ä‡∏µ‡πâ‡πÑ‡∏õ‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤

**Image Coordinate System (‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏†‡∏≤‡∏û)**:
- (x, y): ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ö‡∏ô‡∏†‡∏≤‡∏û (‡∏´‡∏ô‡πà‡∏ß‡∏¢: pixel)
- Origin (0, 0) = ‡∏°‡∏∏‡∏°‡∏ö‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏†‡∏≤‡∏û
- x ‚Üí ‡πÑ‡∏õ‡∏ó‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤, y ‚Üí ‡∏•‡∏á‡∏•‡πà‡∏≤‡∏á

## 2.2 Camera Projection (‡∏Å‡∏≤‡∏£‡∏â‡∏≤‡∏¢‡∏†‡∏≤‡∏û)

### Perspective Projection

‡∏à‡∏∏‡∏î P(X, Y, Z) ‡πÉ‡∏ô‡πÇ‡∏•‡∏Å 3D ‡∏â‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏∏‡∏î p(x, y) ‡∏ö‡∏ô‡∏†‡∏≤‡∏û 2D ‡∏ï‡∏≤‡∏°‡∏™‡∏π‡∏ï‡∏£:

**‡∏™‡∏π‡∏ï‡∏£‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô**:
```
x = f √ó (X / Z)
y = f √ó (Y / Z)
```

**‡πÇ‡∏î‡∏¢‡∏ó‡∏µ‡πà**:
- `f` = Focal length (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡πÇ‡∏ü‡∏Å‡∏±‡∏™) ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö X, Y, Z
- `Z` = ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ñ‡∏∂‡∏á‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏ (depth)

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 1**: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ö‡∏ô‡∏†‡∏≤‡∏û

```
‡∏Å‡∏≥‡∏´‡∏ô‡∏î:
  ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà P = (10 cm, 5 cm, 50 cm) ‡πÉ‡∏ô‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á
  Focal length f = 4 mm = 0.4 cm

‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì:
  x = 0.4 √ó (10 / 50) = 0.4 √ó 0.2 = 0.08 cm
  y = 0.4 √ó (5 / 50)  = 0.4 √ó 0.1 = 0.04 cm

‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ö‡∏ô‡∏†‡∏≤‡∏û = (0.08 cm, 0.04 cm)
```

### Homogeneous Coordinates (‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô)

‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÄ‡∏°‡∏ó‡∏£‡∏¥‡∏Å‡∏ã‡πå‡πÑ‡∏î‡πâ‡∏™‡∏∞‡∏î‡∏ß‡∏Å ‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ **Homogeneous Coordinates**:

**‡∏à‡∏≤‡∏Å Cartesian**:
```
(X, Y, Z) ‚Üí [X, Y, Z, 1]·µÄ  (‡πÄ‡∏û‡∏¥‡πà‡∏° 1 ‡∏ï‡πà‡∏≠‡∏ó‡πâ‡∏≤‡∏¢)
(x, y)    ‚Üí [x, y, 1]·µÄ
```

**Projection Matrix**:
```
[x']   [fx  0  cx  0] [X]
[y'] = [0  fy  cy  0] [Y]
[z']   [0   0   1  0] [Z]
                      [1]

‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô:
  x = x' / z'
  y = y' / z'
```

**‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå**:
- `fx, fy`: Focal length ‡πÉ‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢ pixel (‡πÅ‡∏Å‡∏ô x, y)
- `cx, cy`: Principal point (‡∏à‡∏∏‡∏î‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏†‡∏≤‡∏û)

## 2.3 Camera Intrinsic Matrix (‡πÄ‡∏°‡∏ó‡∏£‡∏¥‡∏Å‡∏ã‡πå‡∏†‡∏≤‡∏¢‡πÉ‡∏ô)

### Intrinsic Parameters (‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏†‡∏≤‡∏¢‡πÉ‡∏ô)

**Camera Intrinsic Matrix K** ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏°‡∏ó‡∏£‡∏¥‡∏Å‡∏ã‡πå‡∏ó‡∏µ‡πà‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á:

```
    [fx  s  cx]
K = [0  fy  cy]
    [0   0   1]
```

**‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏±‡∏ß**:

1. **fx, fy**: Focal length (pixel)
   - `fx = F √ó mx` (F = focal length (mm), mx = pixel size x (mm/pixel))
   - `fy = F √ó my`
   - ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏°‡∏±‡∏Å‡∏°‡∏µ `fx ‚âà fy` (pixel ‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏à‡∏±‡∏ï‡∏∏‡∏£‡∏±‡∏™)

2. **cx, cy**: Principal point (pixel)
   - ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á (optical axis) ‡∏ï‡∏±‡∏î‡∏Å‡∏±‡∏ö image plane
   - ‡πÉ‡∏ô‡∏≠‡∏∏‡∏î‡∏°‡∏Ñ‡∏ï‡∏¥: `cx ‚âà width/2, cy ‚âà height/2`
   - ‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏£‡∏¥‡∏á: ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ (misalignment)

3. **s**: Skew coefficient
   - ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏°‡πà‡∏ï‡∏±‡πâ‡∏á‡∏â‡∏≤‡∏Å‡∏Ç‡∏≠‡∏á‡πÅ‡∏Å‡∏ô x, y ‡∏ö‡∏ô‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå
   - ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏¢‡∏∏‡∏Ñ‡πÉ‡∏´‡∏°‡πà: `s ‚âà 0` (negligible)

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ñ‡πà‡∏≤ K ‡∏à‡∏£‡∏¥‡∏á

**IMX219-83 Stereo Camera (‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ô‡∏µ‡πâ)**:
```python
K_left = [
  [688.31,   0.00, 640.00],  # fx=688.31, cx=640
  [  0.00, 688.31, 360.00],  # fy=688.31, cy=360
  [  0.00,   0.00,   1.00]
]

# Resolution: 1280√ó720
# cx ‚âà 1280/2 = 640 ‚úÖ
# cy ‚âà 720/2 = 360 ‚úÖ
# fx ‚âà fy ‚úÖ (pixel ‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏à‡∏±‡∏ï‡∏∏‡∏£‡∏±‡∏™)
```

## 2.4 Lens Distortion (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô‡∏à‡∏≤‡∏Å‡πÄ‡∏•‡∏ô‡∏™‡πå)

### ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏≠‡∏á Distortion

‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á‡∏°‡∏µ‡πÄ‡∏•‡∏ô‡∏™‡πå ‚Üí ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô (distortion) ‚Üí ‡∏†‡∏≤‡∏û‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏ï‡∏≤‡∏°‡πÇ‡∏°‡πÄ‡∏î‡∏• pinhole

**‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏•‡∏±‡∏Å**:

#### 1. Radial Distortion (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô‡∏£‡∏±‡∏®‡∏°‡∏µ)

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**: ‡∏£‡∏π‡∏õ‡∏£‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡∏ô‡∏™‡πå‡πÇ‡∏Ñ‡πâ‡∏á

**‡∏ä‡∏ô‡∏¥‡∏î**:
- **Barrel Distortion** (‡∏ñ‡∏±‡∏á‡∏ö‡∏ß‡∏°): ‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á‡∏î‡∏π‡πÇ‡∏Ñ‡πâ‡∏á‡∏≠‡∏≠‡∏Å
  - ‡πÄ‡∏Å‡∏¥‡∏î‡∏Å‡∏±‡∏ö Wide-angle lens (FOV ‡∏Å‡∏ß‡πâ‡∏≤‡∏á)
- **Pincushion Distortion** (‡∏´‡∏°‡∏≠‡∏ô‡∏¢‡∏∏‡∏ö): ‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á‡∏î‡∏π‡πÇ‡∏Ñ‡πâ‡∏á‡πÄ‡∏Ç‡πâ‡∏≤
  - ‡πÄ‡∏Å‡∏¥‡∏î‡∏Å‡∏±‡∏ö Telephoto lens (zoom ‡πÄ‡∏¢‡∏≠‡∏∞)

```
Barrel           Ideal          Pincushion
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ‚ï≠‚îÄ‚îÄ‚îÄ‚ïÆ‚îÇ         ‚îÇ‚îå‚îÄ‚îÄ‚îÄ‚îê‚îÇ         ‚îÇ ‚îå‚îÄ‚îê ‚îÇ
‚îÇ‚îÇ   ‚îÇ‚îÇ   vs.   ‚îÇ‚îÇ   ‚îÇ‚îÇ   vs.   ‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ‚ï∞‚îÄ‚îÄ‚îÄ‚ïØ‚îÇ         ‚îÇ‚îî‚îÄ‚îÄ‚îÄ‚îò‚îÇ         ‚îÇ ‚îî‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
  wide           ideal          telephoto
```

**‡∏™‡∏π‡∏ï‡∏£‡πÅ‡∏Å‡πâ**:
```
r¬≤ = x¬≤ + y¬≤  (‡∏£‡∏∞‡∏¢‡∏∞‡∏à‡∏≤‡∏Å‡∏à‡∏∏‡∏î‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á)

x_corrected = x √ó (1 + k‚ÇÅr¬≤ + k‚ÇÇr‚Å¥ + k‚ÇÉr‚Å∂)
y_corrected = y √ó (1 + k‚ÇÅr¬≤ + k‚ÇÇr‚Å¥ + k‚ÇÉr‚Å∂)
```

**‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå**:
- `k‚ÇÅ, k‚ÇÇ, k‚ÇÉ`: Radial distortion coefficients

#### 2. Tangential Distortion (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™)

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**: ‡πÄ‡∏•‡∏ô‡∏™‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÑ‡∏°‡πà‡∏Ç‡∏ô‡∏≤‡∏ô‡∏Å‡∏±‡∏ô

**‡∏™‡∏π‡∏ï‡∏£‡πÅ‡∏Å‡πâ**:
```
x_corrected = x + [2p‚ÇÅxy + p‚ÇÇ(r¬≤ + 2x¬≤)]
y_corrected = y + [p‚ÇÅ(r¬≤ + 2y¬≤) + 2p‚ÇÇxy]
```

**‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå**:
- `p‚ÇÅ, p‚ÇÇ`: Tangential distortion coefficients

### Distortion Coefficients Vector

**OpenCV Format**:
```
D = [k‚ÇÅ, k‚ÇÇ, p‚ÇÅ, p‚ÇÇ, k‚ÇÉ]
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ**:
```python
D_left = [-0.34218365,  # k‚ÇÅ (negative ‚Üí barrel distortion)
           0.11644646,  # k‚ÇÇ
          -0.00079223,  # p‚ÇÅ (small ‚Üí negligible)
          -0.00016717,  # p‚ÇÇ (small ‚Üí negligible)
           0.0]         # k‚ÇÉ (often zero)

# k‚ÇÅ < 0 ‚Üí ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏°‡∏µ barrel distortion
# ‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö wide-angle lens (160¬∞ FOV)
```

### ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ Distortion

**Undistortion Process**:
```python
import cv2

# Input
distorted_image = ...  # ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô
K = ...               # Intrinsic matrix
D = ...               # Distortion coefficients

# Undistort
undistorted_image = cv2.undistort(distorted_image, K, D)

# Result: ‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á‡πÉ‡∏ô‡πÇ‡∏•‡∏Å‡∏à‡∏£‡∏¥‡∏á ‚Üí ‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á‡πÉ‡∏ô‡∏†‡∏≤‡∏û ‚úÖ
```

## 2.5 Camera Extrinsic Parameters (‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å)

### Rotation ‡πÅ‡∏•‡∏∞ Translation

**Extrinsic Parameters** ‡∏ö‡∏≠‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÉ‡∏ô‡πÇ‡∏•‡∏Å

**‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö**:
1. **Rotation Matrix R** (3√ó3):
   - ‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô‡∏à‡∏≤‡∏Å‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÇ‡∏•‡∏Å ‚Üí ‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á
   - Orthogonal matrix (R‚Åª¬π = R·µÄ)

2. **Translation Vector T** (3√ó1):
   - ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏à‡∏≤‡∏Å‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÇ‡∏•‡∏Å ‚Üí ‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á
   - T = [tx, ty, tz]·µÄ

### Transformation (‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á‡∏û‡∏¥‡∏Å‡∏±‡∏î)

**‡∏à‡∏≤‡∏Å‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÇ‡∏•‡∏Å ‚Üí ‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á**:
```
[Xc]   [R | T] [Xw]
[Yc] = [---|--] [Yw]
[Zc]   [0 | 1] [Zw]
[1 ]            [1 ]

‡∏´‡∏£‡∏∑‡∏≠:
Pc = R √ó Pw + T
```

**‡∏à‡∏≤‡∏Å‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á ‚Üí ‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏†‡∏≤‡∏û**:
```
[x]       [Xc]
[y] = K √ó [Yc]  (‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏≤‡∏£ z)
[z]       [Zc]
```

**Full Pipeline**:
```
[x]         [Xw]
[y] = K[R|T][Yw]
[z]         [Zw]
            [1 ]
```

## 2.6 ‡∏™‡∏£‡∏∏‡∏õ‡∏ö‡∏ó‡∏ó‡∏µ‡πà 2

### ‡∏™‡∏π‡∏ï‡∏£‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

| ‡∏™‡∏π‡∏ï‡∏£ | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ |
|------|----------|
| `p = K[R\|T]P` | World ‚Üí Image (full) |
| `x = fx(X/Z) + cx` | 3D ‚Üí 2D (x coordinate) |
| `y = fy(Y/Z) + cy` | 3D ‚Üí 2D (y coordinate) |
| `Z = (fx √ó b) / d` | Disparity ‚Üí Depth |

### ‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á Calibrate

**Intrinsic** (‡∏†‡∏≤‡∏¢‡πÉ‡∏ô):
- K: Camera matrix (fx, fy, cx, cy)
- D: Distortion coefficients (k‚ÇÅ, k‚ÇÇ, p‚ÇÅ, p‚ÇÇ, k‚ÇÉ)

**Extrinsic** (‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å):
- R: Rotation matrix
- T: Translation vector

**Stereo-Specific**:
- Baseline (b): ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á

### ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô

1. Focal length ‡∏°‡∏µ‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏†‡∏≤‡∏û‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?
2. ‡∏ó‡∏≥‡πÑ‡∏° wide-angle lens ‡∏°‡∏±‡∏Å barrel distortion?
3. ‡∏ñ‡πâ‡∏≤ Z ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô 2 ‡πÄ‡∏ó‡πà‡∏≤, x ‡∏ö‡∏ô‡∏†‡∏≤‡∏û‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?
4. Principal point ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏à‡∏≤‡∏Å‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? ‡∏ó‡∏≥‡πÑ‡∏°?

---

# ‡∏ö‡∏ó‡∏ó‡∏µ‡πà 3: Camera Calibration

## 3.1 ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

### Camera Calibration ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?

**Camera Calibration** ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (intrinsic) ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô (distortion) ‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏õ‡∏•‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÇ‡∏•‡∏Å (3D) ‡πÅ‡∏•‡∏∞‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏†‡∏≤‡∏û (2D) ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥

**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå**:
1. ‡∏´‡∏≤‡∏Ñ‡πà‡∏≤ K (intrinsic matrix)
2. ‡∏´‡∏≤‡∏Ñ‡πà‡∏≤ D (distortion coefficients)
3. ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö stereo: ‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 2 ‡∏Å‡∏•‡πâ‡∏≠‡∏á (R, T)

### ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á Calibrate?

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà Calibrate**:
```
‚ùå ‡∏†‡∏≤‡∏û‡∏ú‡∏¥‡∏î‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô (distortion) ‚Üí ‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á‡∏î‡∏π‡πÇ‡∏Ñ‡πâ‡∏á
‚ùå ‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ focal length ‚Üí ‡∏ß‡∏±‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏ú‡∏¥‡∏î
‚ùå ‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ principal point ‚Üí ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ú‡∏¥‡∏î
‚ùå ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö stereo: ‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ baseline ‚Üí depth ‡∏ú‡∏¥‡∏î
```

**‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏Ç‡∏≠‡∏á Calibration**:
```
‚úÖ ‡πÅ‡∏Å‡πâ distortion ‚Üí ‡∏†‡∏≤‡∏û‡∏ï‡∏£‡∏á
‚úÖ ‡∏£‡∏π‡πâ K ‚Üí ‡πÅ‡∏õ‡∏•‡∏á pixel ‚Üî metric ‡πÑ‡∏î‡πâ
‚úÖ ‡∏£‡∏π‡πâ D ‚Üí undistort ‡∏†‡∏≤‡∏û‡πÑ‡∏î‡πâ
‚úÖ ‡∏£‡∏π‡πâ R, T ‚Üí ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì depth ‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥
```

## 3.2 Calibration Patterns

### ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó Pattern

#### 1. Checkerboard Pattern (‡∏´‡∏°‡∏≤‡∏Å‡∏£‡∏∏‡∏Å‡∏î‡∏≥-‡∏Ç‡∏≤‡∏ß)

**‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥**:
- Grid ‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏™‡∏•‡∏±‡∏ö‡∏™‡∏µ (‡∏î‡∏≥-‡∏Ç‡∏≤‡∏ß)
- ‡∏´‡∏≤ corners ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°
- ‡∏á‡πà‡∏≤‡∏¢, ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ

```
  0   1   2   3   4   5
  ‚îå‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îê
0 ‚îÇ‚ñà‚ñà‚ñà‚îÇ   ‚îÇ‚ñà‚ñà‚ñà‚îÇ   ‚îÇ‚ñà‚ñà‚ñà‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚î§
1 ‚îÇ   ‚îÇ‚ñà‚ñà‚ñà‚îÇ   ‚îÇ‚ñà‚ñà‚ñà‚îÇ   ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚î§
2 ‚îÇ‚ñà‚ñà‚ñà‚îÇ   ‚îÇ‚ñà‚ñà‚ñà‚îÇ   ‚îÇ‚ñà‚ñà‚ñà‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îò

‚óã = Corners to detect
```

**‡∏Ç‡πâ‡∏≠‡∏î‡∏µ**:
- ‚úÖ ‡∏á‡πà‡∏≤‡∏¢, ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏á‡πà‡∏≤‡∏¢
- ‚úÖ Algorithm ‡∏°‡∏µ‡πÉ‡∏ô OpenCV

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢**:
- ‚ö†Ô∏è ‡πÑ‡∏ß‡∏ï‡πà‡∏≠‡πÅ‡∏™‡∏á‡πÑ‡∏°‡πà‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠
- ‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏°‡∏µ unique orientation

#### 2. Asymmetric Circles Grid (‡∏ß‡∏á‡∏Å‡∏•‡∏°‡πÅ‡∏ö‡∏ö asymmetric)

**‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥**:
- ‡∏ß‡∏á‡∏Å‡∏•‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÅ‡∏ö‡∏ö offset (row ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏ä‡πà‡∏≠‡∏á)
- ‡∏´‡∏≤ centroids ‡∏Ç‡∏≠‡∏á‡∏ß‡∏á‡∏Å‡∏•‡∏°
- Sub-pixel accuracy ‡∏™‡∏π‡∏á

```
Row 0:  ‚óã     ‚óã     ‚óã     ‚óã
Row 1:    ‚óã     ‚óã     ‚óã
Row 2:  ‚óã     ‚óã     ‚óã     ‚óã
Row 3:    ‚óã     ‚óã     ‚óã
Row 4:  ‚óã     ‚óã     ‚óã     ‚óã

Pattern: 5 rows √ó 6 cols (‡πÅ‡∏ï‡πà‡∏•‡∏∞ row ‡∏ï‡πà‡∏≤‡∏á)
```

**‡∏Ç‡πâ‡∏≠‡∏î‡∏µ**:
- ‚úÖ ‡∏ó‡∏ô‡∏ï‡πà‡∏≠‡πÅ‡∏™‡∏á‡πÑ‡∏°‡πà‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤
- ‚úÖ Sub-pixel accuracy ‡∏™‡∏π‡∏á (circle centroid)
- ‚úÖ Unique orientation (‡πÑ‡∏°‡πà‡∏™‡∏±‡∏ö‡∏™‡∏ô)
- ‚úÖ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö wide-angle lens

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢**:
- ‚ö†Ô∏è ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏¢‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ checkerboard ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢
- ‚ö†Ô∏è ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à spacing (‡∏î‡∏±‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏•‡πà‡∏≤‡∏ß‡πÉ‡∏ô Week 1!)

**‡∏ó‡∏≥‡πÑ‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Asymmetric Circles?** (‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ô‡∏µ‡πâ)
```
‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•:
1. ‡∏á‡∏≤‡∏ô‡πÄ‡∏Å‡∏©‡∏ï‡∏£ ‚Üí ‡πÅ‡∏™‡∏á‡πÑ‡∏°‡πà‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠ ‚Üí ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ pattern ‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô ‚úÖ
2. Wide-angle lens (160¬∞ FOV) ‚Üí barrel distortion ‡∏™‡∏π‡∏á ‚Üí circles ‡πÅ‡∏Å‡πâ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ squares ‚úÖ
3. ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡πÄ‡∏•‡πá‡∏Å (‡∏û‡∏£‡∏¥‡∏Å) ‚Üí ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ sub-pixel accuracy ‚úÖ
```

### ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Pattern Size

**‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå**:
- **Rows √ó Columns**: ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà detect
- **Spacing**: ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏à‡∏∏‡∏î (mm)
- **Total size**: ‡∏Ç‡∏ô‡∏≤‡∏î‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á pattern (mm)

**‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥**:
```
‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡∏∏‡∏î:
  - Minimum: 6√ó8 = 48 ‡∏à‡∏∏‡∏î
  - Recommended: 7√ó9 = 63 ‡∏à‡∏∏‡∏î ‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤
  - ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ô‡∏µ‡πâ: 5√ó6 = 33 ‡∏ß‡∏á‡∏Å‡∏•‡∏° (‡∏û‡∏≠‡πÄ‡∏û‡∏µ‡∏¢‡∏á)

Spacing:
  - ‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
  - ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏π‡∏á ‚Üí spacing ‡πÄ‡∏•‡πá‡∏Å‡πÑ‡∏î‡πâ
  - ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ô‡∏µ‡πâ: 18mm (‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà 320mm height)

Total size:
  - ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
  - ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏ï‡πá‡∏° 50-80% ‡∏Ç‡∏≠‡∏á‡∏†‡∏≤‡∏û
```

## 3.3 Single Camera Calibration

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£ Calibrate

#### Step 1: Collect Calibration Images

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£**:
1. ‡∏û‡∏¥‡∏°‡∏û‡πå pattern ‡∏ö‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏© A4 ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏´‡∏ç‡πà‡∏Å‡∏ß‡πà‡∏≤
2. ‡∏ï‡∏¥‡∏î‡∏ö‡∏ô‡πÅ‡∏ú‡πà‡∏ô‡πÅ‡∏Ç‡πá‡∏á (foam board / acrylic) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏ö‡∏ô
3. ‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û pattern ‡∏à‡∏≤‡∏Å **‡∏´‡∏•‡∏≤‡∏¢‡∏°‡∏∏‡∏°‡∏°‡∏≠‡∏á, ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏∞‡∏¢‡∏∞**

**‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏†‡∏≤‡∏û**:
- Minimum: 10-15 ‡∏†‡∏≤‡∏û
- Recommended: 20-30 ‡∏†‡∏≤‡∏û
- ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ô‡∏µ‡πâ: 40 ‡∏†‡∏≤‡∏û (‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏õ‡πâ‡∏≤!)

**‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ñ‡πà‡∏≤‡∏¢**:
```
Orientation:
  - ‡∏ï‡∏£‡∏á (0¬∞)
  - ‡πÄ‡∏≠‡∏µ‡∏¢‡∏á‡∏ã‡πâ‡∏≤‡∏¢-‡∏Ç‡∏ß‡∏≤ (¬±30¬∞)
  - ‡πÄ‡∏≠‡∏µ‡∏¢‡∏á‡∏ö‡∏ô-‡∏•‡πà‡∏≤‡∏á (¬±30¬∞)
  - ‡∏´‡∏°‡∏∏‡∏ô (¬±45¬∞)

Distance:
  - ‡πÉ‡∏Å‡∏•‡πâ (‡πÄ‡∏ï‡πá‡∏°‡∏†‡∏≤‡∏û)
  - ‡∏Å‡∏•‡∏≤‡∏á (70-80% ‡∏†‡∏≤‡∏û)
  - ‡πÑ‡∏Å‡∏• (50-60% ‡∏†‡∏≤‡∏û)

Position:
  - ‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á
  - ‡∏°‡∏∏‡∏°‡∏ï‡πà‡∏≤‡∏á‡πÜ (top-left, top-right, ‡∏Ø‡∏•‡∏Ø)

‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: Coverage ‡∏ó‡∏±‡πà‡∏ß‡∏†‡∏≤‡∏û!
```

#### Step 2: Detect Pattern Points

**‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Checkerboard**:
```python
import cv2
import numpy as np

# Pattern size (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô corners, ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°!)
pattern_size = (8, 5)  # 9√ó6 squares = 8√ó5 corners

# Find corners
ret, corners = cv2.findChessboardCorners(
    image_gray,
    pattern_size,
    flags=cv2.CALIB_CB_ADAPTIVE_THRESH + cv2.CALIB_CB_NORMALIZE_IMAGE
)

if ret:
    # Refine corners ‡πÉ‡∏´‡πâ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥ (sub-pixel)
    corners = cv2.cornerSubPix(
        image_gray,
        corners,
        (11, 11),  # Window size
        (-1, -1),  # Zero zone (no dead region)
        criteria=(cv2.TERM_CRITERIA_EPS + cv2.TERM_CRITERIA_MAX_ITER, 30, 0.001)
    )
```

**‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Asymmetric Circles**:
```python
# Pattern size (rows, columns)
pattern_size = (5, 6)  # 5 rows, 6 columns = 33 circles

# Find circles
ret, centers = cv2.findCirclesGrid(
    image_gray,
    pattern_size,
    flags=cv2.CALIB_CB_ASYMMETRIC_GRID
)

# Centers ‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å centroid ‚Üí sub-pixel accuracy ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß!
```

#### Step 3: Prepare Object Points

**Object Points** ‡∏Ñ‡∏∑‡∏≠‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á 3D ‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏à‡∏∏‡∏î‡∏ö‡∏ô pattern

**‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Asymmetric Circles (spacing = 18mm)**:
```python
def create_object_points(rows, cols, spacing_mm):
    """
    ‡∏™‡∏£‡πâ‡∏≤‡∏á object points ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö asymmetric circles grid

    Pattern layout:
    Row 0: (0,0)   (36,0)   (72,0)   ...
    Row 1:   (18,18)  (54,18)  (90,18) ...
    Row 2: (0,36)  (36,36)  (72,36)  ...
    """
    objp = np.zeros((rows * cols, 3), np.float32)

    for i in range(rows):
        for j in range(cols):
            # x = (2j + i%2) √ó spacing
            # y = i √ó spacing
            # z = 0 (pattern ‡∏ö‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏£‡∏≤‡∏ö)
            objp[i * cols + j, 0] = (2 * j + i % 2) * spacing_mm
            objp[i * cols + j, 1] = i * spacing_mm
            objp[i * cols + j, 2] = 0

    return objp

# ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: 5√ó6, spacing=18mm
objp = create_object_points(5, 6, 18)

# objp[0] = [0, 0, 0]       # Row 0, Col 0
# objp[1] = [36, 0, 0]      # Row 0, Col 1
# objp[6] = [18, 18, 0]     # Row 1, Col 0
# objp[7] = [54, 18, 0]     # Row 1, Col 1
# ...
```

**üö® ‡∏Ç‡πâ‡∏≠‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç**: `spacing_mm` ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!
- ‡∏ñ‡πâ‡∏≤ spacing ‡∏ú‡∏¥‡∏î ‚Üí scale ‡∏ú‡∏¥‡∏î ‚Üí ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ú‡∏¥‡∏î!
- **‡∏ï‡πâ‡∏≠‡∏á‡∏ß‡∏±‡∏î‡∏à‡∏≤‡∏Å‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏ó‡∏µ‡πà‡∏û‡∏¥‡∏°‡∏û‡πå‡∏à‡∏£‡∏¥‡∏á** ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÄ‡∏•‡∏¢!

#### Step 4: Calibrate Camera

**OpenCV Function**:
```python
import cv2

# ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡∏†‡∏≤‡∏û
object_points = []  # 3D points in real world
image_points = []   # 2D points in images

for each image:
    objp = create_object_points(...)
    ret, corners = cv2.findCirclesGrid(...)

    if ret:
        object_points.append(objp)
        image_points.append(corners)

# Calibrate!
ret, K, D, rvecs, tvecs = cv2.calibrateCamera(
    object_points,
    image_points,
    image_size,
    None,  # K initial guess (None = auto)
    None,  # D initial guess (None = auto)
    flags=0
)

print(f"RMS Reprojection Error: {ret:.4f} pixels")
print(f"Camera Matrix K:\n{K}")
print(f"Distortion Coefficients D:\n{D}")
```

**Output**:
- `ret`: RMS reprojection error (‡∏Ñ‡∏ß‡∏£‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ 1 pixel)
- `K`: Camera intrinsic matrix (3√ó3)
- `D`: Distortion coefficients (5√ó1 ‡∏´‡∏£‡∏∑‡∏≠ 8√ó1)
- `rvecs`: Rotation vectors ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏†‡∏≤‡∏û
- `tvecs`: Translation vectors ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏†‡∏≤‡∏û

### ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û Calibration

#### 1. RMS Reprojection Error

**‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢**: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏â‡∏≤‡∏¢‡∏à‡∏∏‡∏î 3D ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô 2D

**‡∏™‡∏π‡∏ï‡∏£**:
```
RMS = sqrt(Œ£||p_detected - p_projected||¬≤ / N)

‡πÇ‡∏î‡∏¢‡∏ó‡∏µ‡πà:
  p_detected = ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà detect ‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏†‡∏≤‡∏û
  p_projected = ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å K, D, R, T
  N = ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡∏∏‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
```

**‡πÄ‡∏Å‡∏ì‡∏ë‡πå**:
```
RMS < 0.5 px  ‚Üí Excellent ‚úÖ
RMS < 1.0 px  ‚Üí Good ‚úÖ
RMS < 2.0 px  ‚Üí Acceptable ‚ö†Ô∏è
RMS ‚â• 2.0 px  ‚Üí Poor, ‡∏Ñ‡∏ß‡∏£ re-calibrate ‚ùå
```

**‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ô‡∏µ‡πâ**:
```
Left Camera:  RMS = 0.22 px (Excellent!)
Right Camera: RMS = 0.20 px (Excellent!)
```

#### 2. Visual Inspection

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö**:
```python
# Undistort ‡∏†‡∏≤‡∏û
undistorted = cv2.undistort(image, K, D)

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:
# 1. ‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á‡πÉ‡∏ô‡πÇ‡∏•‡∏Å‡∏à‡∏£‡∏¥‡∏á ‚Üí ‡∏ï‡∏£‡∏á‡πÉ‡∏ô‡∏†‡∏≤‡∏û‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?
# 2. ‡∏°‡∏∏‡∏°‡∏´‡πâ‡∏≠‡∏á (90¬∞) ‚Üí 90¬∞ ‡πÉ‡∏ô‡∏†‡∏≤‡∏û‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?
# 3. Pattern board ‚Üí ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏ú‡∏∑‡∏ô‡∏ú‡πâ‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?
```

#### 3. Reprojection Error per Image

**‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏†‡∏≤‡∏û‡πÑ‡∏´‡∏ô‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤**:
```python
for i in range(len(object_points)):
    imgpoints2, _ = cv2.projectPoints(
        object_points[i], rvecs[i], tvecs[i], K, D
    )
    error = cv2.norm(image_points[i], imgpoints2, cv2.NORM_L2) / len(imgpoints2)
    print(f"Image {i}: Error = {error:.4f} px")
```

**‡∏ñ‡πâ‡∏≤‡∏†‡∏≤‡∏û‡πÑ‡∏´‡∏ô error ‡∏™‡∏π‡∏á (>2px)**:
- ‡∏•‡∏ö‡∏†‡∏≤‡∏û‡∏ô‡∏±‡πâ‡∏ô‡∏≠‡∏≠‡∏Å
- Re-calibrate ‡πÉ‡∏´‡∏°‡πà

## 3.4 Stereo Camera Calibration

### ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å Single Camera

**Single Camera Calibration**:
- ‡∏´‡∏≤ K, D ‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß

**Stereo Calibration**:
- ‡∏´‡∏≤ K_left, D_left
- ‡∏´‡∏≤ K_right, D_right
- ‡∏´‡∏≤ R, T (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 2 ‡∏Å‡∏•‡πâ‡∏≠‡∏á)

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô Stereo Calibration

#### Step 1: Calibrate ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Å‡∏•‡πâ‡∏≠‡∏á

```python
# ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ã‡πâ‡∏≤‡∏¢
ret_L, K_L, D_L, rvecs_L, tvecs_L = cv2.calibrateCamera(
    objpoints, imgpoints_left, image_size, None, None
)

# ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏Ç‡∏ß‡∏≤
ret_R, K_R, D_R, rvecs_R, tvecs_R = cv2.calibrateCamera(
    objpoints, imgpoints_right, image_size, None, None
)
```

#### Step 2: Stereo Calibration

```python
# Stereo calibrate (‡∏´‡∏≤ R, T)
ret, K_L, D_L, K_R, D_R, R, T, E, F = cv2.stereoCalibrate(
    objpoints,
    imgpoints_left,
    imgpoints_right,
    K_L, D_L,
    K_R, D_R,
    image_size,
    flags=cv2.CALIB_FIX_INTRINSIC  # Fix K, D (‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å single calib)
)

print(f"Stereo RMS Error: {ret:.4f} pixels")
print(f"Baseline: {np.linalg.norm(T):.2f} mm")
```

**Output ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°**:
- `R`: Rotation matrix (3√ó3) ‡∏à‡∏≤‡∏Å left ‚Üí right
- `T`: Translation vector (3√ó1) ‡∏à‡∏≤‡∏Å left ‚Üí right
- `E`: Essential matrix (‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö epipolar geometry)
- `F`: Fundamental matrix (‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö epipolar geometry)

**Baseline**:
```python
baseline = np.linalg.norm(T)  # ||T|| = ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 2 ‡∏Å‡∏•‡πâ‡∏≠‡∏á

# ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ô‡∏µ‡πâ: baseline = 60.57 mm
# Spec: 60 mm ‚Üí Error 0.95% ‚úÖ
```

### Stereo Rectification

**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå**: ‡∏ó‡∏≥‡πÉ‡∏´‡πâ epipolar lines ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô (horizontal) ‚Üí matching ‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô

```python
R_L, R_R, P_L, P_R, Q, roi_L, roi_R = cv2.stereoRectify(
    K_L, D_L,
    K_R, D_R,
    image_size,
    R, T,
    alpha=0  # 0 = crop ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ valid pixels, 1 = keep all pixels
)
```

**Output**:
- `R_L, R_R`: Rectification rotation matrices
- `P_L, P_R`: Projection matrices ‡πÉ‡∏´‡∏°‡πà (3√ó4)
- `Q`: Disparity-to-depth mapping matrix (4√ó4)
- `roi_L, roi_R`: Region of interest (valid pixels)

**Q Matrix** (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å!):
```
    [1  0   0      -cx]
Q = [0  1   0      -cy]
    [0  0   0       f ]
    [0  0  -1/Tx  cy_diff/Tx]

‡πÇ‡∏î‡∏¢‡∏ó‡∏µ‡πà:
  f = focal length
  Tx = baseline (‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á)
  cx, cy = principal point

‡πÉ‡∏ä‡πâ‡πÅ‡∏õ‡∏•‡∏á disparity ‚Üí depth:
  Z = Q[2,3] / disparity = (f √ó Tx) / d
```

## 3.5 ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢‡πÅ‡∏•‡∏∞‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà 1: RMS Error ‡∏™‡∏π‡∏á (>2 pixels)

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**:
- ‡∏†‡∏≤‡∏û‡∏ö‡∏≤‡∏á‡∏†‡∏≤‡∏û‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (motion blur, out of focus)
- Pattern detection ‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î
- Spacing ‡∏ú‡∏¥‡∏î

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**:
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö error per image
2. ‡∏•‡∏ö‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà error ‡∏™‡∏π‡∏á
3. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏î‡∏µ
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö spacing ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà 2: Baseline ‡∏ú‡∏¥‡∏î‡∏°‡∏≤‡∏Å

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**:
- ‚ùå **Spacing ‡∏ú‡∏¥‡∏î!** (‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î!)
- Pattern ‡πÑ‡∏°‡πà‡πÅ‡∏ö‡∏ô (‡πÇ‡∏Ñ‡πâ‡∏á‡πÑ‡∏õ)
- ‡∏†‡∏≤‡∏û‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á (‡∏à‡∏≤‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ)**:
```
Spacing = 25mm (‡∏ú‡∏¥‡∏î) ‚Üí Baseline = 436mm ‚ùå
Spacing = 18mm (‡∏ñ‡∏π‡∏Å)  ‚Üí Baseline = 60mm ‚úÖ

Scale error = 25/18 = 1.389 (39% ‡∏ú‡∏¥‡∏î!)
```

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**:
1. **‡∏ß‡∏±‡∏î spacing ‡∏à‡∏≤‡∏Å‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏à‡∏£‡∏¥‡∏á**
2. ‡∏ß‡∏±‡∏î‡∏´‡∏•‡∏≤‡∏¢‡πÜ ‡∏à‡∏∏‡∏î ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢
3. ‡πÉ‡∏ä‡πâ‡πÑ‡∏°‡πâ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà 3: Stereo RMS ‡∏™‡∏π‡∏á ‡πÅ‡∏ï‡πà Single RMS ‡∏ï‡πà‡∏≥

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**:
- Wide-angle lens ‚Üí barrel distortion ‡∏™‡∏π‡∏á
- ‡∏Å‡∏•‡πâ‡∏≠‡∏á 2 ‡∏ï‡∏±‡∏ß‡πÑ‡∏°‡πà sync ‡∏Å‡∏±‡∏ô‡∏û‡∏≠‡∏î‡∏µ

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á (‡∏à‡∏≤‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ)**:
```
Left RMS:   0.22 px ‚úÖ
Right RMS:  0.20 px ‚úÖ
Stereo RMS: 50.79 px ‚ö†Ô∏è (‡∏™‡∏π‡∏á‡πÅ‡∏ï‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ!)
```

**‡∏ó‡∏≥‡πÑ‡∏°‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ?**
- Wide-angle lens (160¬∞ FOV) ‚Üí normal!
- Baseline ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (60mm) ‚Üí metric scale OK
- Depth accuracy ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß (¬±0.5cm) ‚Üí ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà 4: Pattern Detection ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**:
- ‡πÅ‡∏™‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠ / ‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ
- Pattern out of focus
- Pattern ‡πÑ‡∏°‡πà‡πÄ‡∏ï‡πá‡∏°‡πÉ‡∏ô FOV ‡∏Å‡∏•‡πâ‡∏≠‡∏á
- Configuration ‡∏ú‡∏¥‡∏î (rows, cols)

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**:
1. ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏á (brightness, contrast)
2. ‡∏õ‡∏£‡∏±‡∏ö focus ‡∏Å‡∏•‡πâ‡∏≠‡∏á
3. ‡∏ñ‡πà‡∏≤‡∏¢‡πÉ‡∏´‡πâ pattern ‡πÄ‡∏ï‡πá‡∏° 50-80% ‡∏Ç‡∏≠‡∏á‡∏†‡∏≤‡∏û
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (rows, cols) ‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

## 3.6 ‡∏™‡∏£‡∏∏‡∏õ‡∏ö‡∏ó‡∏ó‡∏µ‡πà 3

### Checklist ‡∏Å‡∏≤‡∏£ Calibrate

**‡∏Å‡πà‡∏≠‡∏ô Calibrate**:
- [ ] ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å pattern ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° (asymmetric circles ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)
- [ ] ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ö‡∏ô‡πÅ‡∏ú‡πà‡∏ô‡πÅ‡∏Ç‡πá‡∏á
- [ ] **‡∏ß‡∏±‡∏î spacing ‡∏à‡∏£‡∏¥‡∏á** (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å!)
- [ ] ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÅ‡∏™‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°

**‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Calibrate**:
- [ ] ‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢ (20-40 ‡∏†‡∏≤‡∏û)
- [ ] ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏°‡∏ó‡∏∏‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡∏†‡∏≤‡∏û
- [ ] ‡πÄ‡∏ä‡πá‡∏Ñ pattern detection real-time

**‡∏´‡∏•‡∏±‡∏á Calibrate**:
- [ ] RMS < 1 px ‚úÖ
- [ ] Baseline ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö spec (¬±5mm)
- [ ] Visual inspection (‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á ‚Üí ‡∏ï‡∏£‡∏á)
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö depth accuracy

### ‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ

**‡∏à‡∏≤‡∏Å Single Calibration**:
```python
K_left = [[fx, 0, cx],
          [0, fy, cy],
          [0,  0,  1]]

D_left = [k1, k2, p1, p2, k3]
```

**‡∏à‡∏≤‡∏Å Stereo Calibration**:
```python
R = Rotation matrix (3√ó3)
T = Translation vector (3√ó1)
baseline = ||T||
Q = Disparity-to-depth matrix (4√ó4)
```

### ‡∏ö‡∏ó‡∏ï‡πà‡∏≠‡πÑ‡∏õ

- ‡∏ö‡∏ó‡∏ó‡∏µ‡πà 4: Stereo Geometry (‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à R, T, epipolar geometry)
- ‡∏ö‡∏ó‡∏ó‡∏µ‡πà 5: Rectification (‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á rectify?)
- ‡∏ö‡∏ó‡∏ó‡∏µ‡πà 6: Depth Estimation (‡∏à‡∏≤‡∏Å disparity ‚Üí depth)

---

# ‡∏ö‡∏ó‡∏ó‡∏µ‡πà 4: Stereo Geometry ‡πÅ‡∏•‡∏∞ Epipolar Geometry

## 4.1 Stereo Geometry Basics

### Coordinate Systems

**‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÉ‡∏ô Stereo Vision**:
```
World Coordinate (W):
  - ‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô: ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏î‡∏Å‡πá‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡πÇ‡∏•‡∏Å
  - ‡πÉ‡∏ä‡πâ: (Xw, Yw, Zw)

Left Camera Coordinate (CL):
  - ‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô: Optical center ‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ã‡πâ‡∏≤‡∏¢
  - ‡πÉ‡∏ä‡πâ: (XL, YL, ZL)

Right Camera Coordinate (CR):
  - ‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô: Optical center ‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏Ç‡∏ß‡∏≤
  - ‡πÉ‡∏ä‡πâ: (XR, YR, ZR)
```

**Transformation Chain**:
```
World ‚Üí Left Camera:
  PL = R_L √ó Pw + T_L

Left Camera ‚Üí Right Camera:
  PR = R √ó PL + T

‡πÇ‡∏î‡∏¢‡∏ó‡∏µ‡πà:
  R = Rotation matrix (3√ó3)
  T = Translation vector (3√ó1)
  ||T|| = Baseline
```

### Baseline and Depth Relationship

**Baseline (b)**: ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á optical centers ‡∏Ç‡∏≠‡∏á 2 ‡∏Å‡∏•‡πâ‡∏≠‡∏á

```
        CL              CR
        üëÅÔ∏è‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄb‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄüëÅÔ∏è
         ‚îÇ‚ï≤          ‚ï±‚îÇ
         ‚îÇ ‚ï≤        ‚ï± ‚îÇ
         ‚îÇ  ‚ï≤      ‚ï±  ‚îÇ
         ‚îÇ   ‚ï≤    ‚ï±   ‚îÇ
         ‚îÇ    ‚ï≤  ‚ï±    ‚îÇ
         ‚îÇ     ‚ï≤‚ï±     ‚îÇ
         ‚îÇ      P     ‚îÇ
              (X,Y,Z)
```

**‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå**:
- Baseline ‡πÉ‡∏´‡∏ç‡πà ‚Üí ‡∏ß‡∏±‡∏î‡∏£‡∏∞‡∏¢‡∏∞‡πÑ‡∏Å‡∏•‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥
- Baseline ‡πÄ‡∏•‡πá‡∏Å ‚Üí ‡∏ß‡∏±‡∏î‡∏£‡∏∞‡∏¢‡∏∞‡πÉ‡∏Å‡∏•‡πâ‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥

**‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ô‡∏µ‡πâ**:
- Baseline = 60mm
- ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô = 25-50cm
- ‚Üí ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° ‚úÖ

## 4.2 Epipolar Geometry

### Epipolar Constraint

**Epipolar Geometry** ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏ó‡∏≤‡∏á‡πÄ‡∏£‡∏Ç‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏†‡∏≤‡∏û‡∏ã‡πâ‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏†‡∏≤‡∏û‡∏Ç‡∏ß‡∏≤

**‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö**:

```
      CL              CR
      ‚óã‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚óã   Baseline
      ‚îÇ‚ï≤            ‚ï±‚îÇ
      ‚îÇ ‚ï≤          ‚ï± ‚îÇ
      ‚îÇ  ‚ï≤    P   ‚ï±  ‚îÇ   ‚Üê ‡∏à‡∏∏‡∏î‡πÉ‡∏ô‡πÇ‡∏•‡∏Å 3D
      ‚îÇ   ‚ï≤  ‚óè   ‚ï±   ‚îÇ
      ‚îÇ    ‚ï≤   ‚ï±    ‚îÇ
     ‚ï±‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ï≤‚îÄ‚ï±‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚ï≤
    ‚ï± ‚îÇ  pL  ‚ï≥  pR  ‚îÇ ‚ï≤
   ‚ï±  ‚îÇ     ‚ï± ‚ï≤     ‚îÇ  ‚ï≤
  ‚ï±‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚ï±‚îÄ‚îÄ‚îÄ‚ï≤‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚ï≤
 Image Left   Image Right

Epipolar line: ‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° pL ‡πÅ‡∏•‡∏∞ epipole
```

**Definitions**:

1. **Epipole (eL, eR)**:
   - ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà baseline ‡∏ï‡∏±‡∏î‡∏Å‡∏±‡∏ö image plane
   - eL = ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≠‡∏á CR ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏â‡∏≤‡∏¢‡∏•‡∏á‡∏ö‡∏ô Image Left
   - eR = ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≠‡∏á CL ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏â‡∏≤‡∏¢‡∏•‡∏á‡∏ö‡∏ô Image Right

2. **Epipolar Line**:
   - ‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° epipole ‡∏Å‡∏±‡∏ö‡∏à‡∏∏‡∏î‡∏ö‡∏ô‡∏†‡∏≤‡∏û
   - ‡∏ñ‡πâ‡∏≤ pL ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô ‚Üí pR ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô epipolar line ‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á

3. **Epipolar Plane**:
   - ‡∏£‡∏∞‡∏ô‡∏≤‡∏ö‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô CL, CR, ‡πÅ‡∏•‡∏∞ P
   - ‡∏ï‡∏±‡∏î image planes ‡πÑ‡∏î‡πâ epipolar lines

### Epipolar Constraint Equation

**‡∏ñ‡πâ‡∏≤ pL ‚Üî pR ‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô (same 3D point P)**:
```
pR^T √ó F √ó pL = 0

‡πÇ‡∏î‡∏¢‡∏ó‡∏µ‡πà:
  F = Fundamental matrix (3√ó3)
  pL = [x_L, y_L, 1]^T (homogeneous coordinates)
  pR = [x_R, y_R, 1]^T
```

**Fundamental Matrix F**:
- ‡πÄ‡∏°‡∏ó‡∏£‡∏¥‡∏Å‡∏ã‡πå 3√ó3 ‡∏ó‡∏µ‡πà‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå epipolar
- ‡∏´‡∏≤‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å stereo calibration
- Rank = 2 (singular)

**Essential Matrix E**:
```
E = K_R^T √ó F √ó K_L

‡∏´‡∏£‡∏∑‡∏≠:
E = [T]√ó √ó R

‡πÇ‡∏î‡∏¢‡∏ó‡∏µ‡πà:
  [T]√ó = Skew-symmetric matrix ‡∏Ç‡∏≠‡∏á T
  R = Rotation matrix
```

### ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Epipolar Constraint

**‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå**:
1. **‡∏•‡∏î search space**:
   - ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏≤ correspondence ‡∏ó‡∏±‡πâ‡∏á‡∏†‡∏≤‡∏û (2D search)
   - ‡∏´‡∏≤‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ö‡∏ô epipolar line (1D search)

2. **Reject outliers**:
   - ‡∏ñ‡πâ‡∏≤ pR ‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô epipolar line ‚Üí ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà correspondence ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å

3. **Rectification**:
   - ‡πÅ‡∏õ‡∏•‡∏á‡∏†‡∏≤‡∏û‡πÉ‡∏´‡πâ epipolar lines ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô ‚Üí matching ‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô

## 4.3 Triangulation (‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏à‡∏∏‡∏î 3D)

### ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£

**Triangulation** ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á 3D (P) ‡∏à‡∏≤‡∏Å‡∏à‡∏∏‡∏î 2D ‡∏ö‡∏ô‡∏†‡∏≤‡∏û 2 ‡∏†‡∏≤‡∏û (pL, pR)

```
        CL              CR
        ‚óè‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚óè
         ‚ï≤             ‚ï±
          ‚ï≤   Ray L   ‚ï± Ray R
           ‚ï≤         ‚ï±
            ‚ï≤       ‚ï±
             ‚ï≤     ‚ï±
              ‚ï≤   ‚ï±
               ‚ï≤ ‚ï±
                ‚óè P (X, Y, Z)
```

**‡∏™‡∏π‡∏ï‡∏£ (‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏á‡πà‡∏≤‡∏¢)**:

‡∏ñ‡πâ‡∏≤ epipolar lines ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô (rectified):
```
Disparity (d) = x_L - x_R  (pixel shift)

Depth:
  Z = (f √ó b) / d

‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì X, Y:
  X = (x_L - cx) √ó Z / f
  Y = (y_L - cy) √ó Z / f
```

### Linear Triangulation

**‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö general case** (‡πÑ‡∏°‡πà rectified):

```python
def triangulate_point(pL, pR, P_L, P_R):
    """
    Linear triangulation (DLT method)

    Args:
        pL: [x, y, 1] in left image
        pR: [x, y, 1] in right image
        P_L: Projection matrix left (3√ó4)
        P_R: Projection matrix right (3√ó4)

    Returns:
        P: [X, Y, Z, 1] in world/camera coordinate
    """
    # ‡∏™‡∏£‡πâ‡∏≤‡∏á A matrix
    A = np.array([
        pL[1] * P_L[2,:] - P_L[1,:],
        P_L[0,:] - pL[0] * P_L[2,:],
        pR[1] * P_R[2,:] - P_R[1,:],
        P_R[0,:] - pR[0] * P_R[2,:]
    ])

    # Solve A √ó P = 0 using SVD
    _, _, Vt = np.linalg.svd(A)
    P = Vt[-1, :]
    P = P / P[3]  # Normalize

    return P[:3]  # [X, Y, Z]
```

**OpenCV Function**:
```python
import cv2

# Triangulate ‡∏´‡∏•‡∏≤‡∏¢‡∏à‡∏∏‡∏î
points_4D = cv2.triangulatePoints(P_L, P_R, ptsL, ptsR)

# Convert ‡∏à‡∏≤‡∏Å homogeneous coordinates
points_3D = points_4D[:3, :] / points_4D[3, :]
```

### Reprojection Error

**‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö**:

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å triangulate ‡πÑ‡∏î‡πâ P ‡πÅ‡∏•‡πâ‡∏ß ‡∏â‡∏≤‡∏¢ P ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô pL', pR':
```
pL' = P_L √ó P
pR' = P_R √ó P
```

**Reprojection Error**:
```
error_L = ||pL - pL'||
error_R = ||pR - pR'||

Total error = sqrt(error_L¬≤ + error_R¬≤)
```

**‡πÄ‡∏Å‡∏ì‡∏ë‡πå**:
- Error < 1 px ‚Üí Good ‚úÖ
- Error < 2 px ‚Üí Acceptable ‚ö†Ô∏è
- Error ‚â• 2 px ‚Üí Bad ‚ùå

## 4.4 Rectification (‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏†‡∏≤‡∏û‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á)

### ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á Rectify?

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏†‡∏≤‡∏û‡∏î‡∏¥‡∏ö (unrectified)**:
- Epipolar lines ‡πÑ‡∏°‡πà horizontal ‚Üí search 2D
- Correspondence ‡∏¢‡∏≤‡∏Å, ‡∏ä‡πâ‡∏≤

**‡∏´‡∏•‡∏±‡∏á Rectification**:
- Epipolar lines horizontal ‚úÖ
- Correspondence ‚Üí search 1D (‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô) ‚úÖ
- ‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤‡∏°‡∏≤‡∏Å!

```
Before Rectification:          After Rectification:

Left:         Right:          Left:         Right:
  ‚ï±              ‚ï≤              ‚îÄ              ‚îÄ
 ‚ï±                ‚ï≤             ‚îÄ              ‚îÄ
‚ï±    Epipolar      ‚ï≤            ‚îÄ  Horizontal ‚îÄ
     lines                      ‚îÄ    lines     ‚îÄ
    ‡πÑ‡∏°‡πà horizontal               ‚îÄ              ‚îÄ
```

### Rectification Process

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô**:
1. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Rectification rotation matrices: R_L, R_R
2. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Projection matrices ‡πÉ‡∏´‡∏°‡πà: P_L, P_R
3. Remap images: ‡πÉ‡∏ä‡πâ R_L, R_R ‡πÅ‡∏õ‡∏•‡∏á‡∏†‡∏≤‡∏û

**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå**:
- Epipolar lines ‚Üí horizontal
- Corresponding points ‚Üí same y coordinate
- Matching: search ‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (‡∏ó‡∏µ‡πà y ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô)

**OpenCV Implementation**:
```python
# Rectify (‡∏à‡∏≤‡∏Å stereo calibration)
R_L, R_R, P_L, P_R, Q, roi_L, roi_R = cv2.stereoRectify(
    K_L, D_L,
    K_R, D_R,
    image_size,
    R, T,
    alpha=0
)

# ‡∏™‡∏£‡πâ‡∏≤‡∏á rectification maps
map_L_x, map_L_y = cv2.initUndistortRectifyMap(
    K_L, D_L, R_L, P_L, image_size, cv2.CV_32FC1
)
map_R_x, map_R_y = cv2.initUndistortRectifyMap(
    K_R, D_R, R_R, P_R, image_size, cv2.CV_32FC1
)

# Remap (‡πÅ‡∏õ‡∏•‡∏á‡∏†‡∏≤‡∏û)
rect_L = cv2.remap(img_L, map_L_x, map_L_y, cv2.INTER_LINEAR)
rect_R = cv2.remap(img_R, map_R_x, map_R_y, cv2.INTER_LINEAR)

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö: ‡∏ß‡∏≤‡∏î‡πÄ‡∏™‡πâ‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô
for y in range(0, height, 30):
    cv2.line(rect_L, (0, y), (width, y), (0, 255, 0), 1)
    cv2.line(rect_R, (0, y), (width, y), (0, 255, 0), 1)

# ‡∏à‡∏∏‡∏î‡∏ö‡∏ô rect_L ‡∏ó‡∏µ‡πà y=100 ‚Üí ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏ö‡∏ô rect_R ‡∏Å‡πá‡∏ï‡πâ‡∏≠‡∏á y=100 ‚úÖ
```

## 4.5 ‡∏™‡∏£‡∏∏‡∏õ‡∏ö‡∏ó‡∏ó‡∏µ‡πà 4

### Epipolar Geometry - ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏±‡πâ‡∏ô

| Concept | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ | ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå |
|---------|----------|----------|
| **Epipolar Line** | ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏µ‡πà pR ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏ñ‡πâ‡∏≤ pL ‡∏Ñ‡∏∑‡∏≠ correspondence | ‡∏•‡∏î search space |
| **Fundamental Matrix F** | ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå epipolar | ‡∏´‡∏≤ epipolar lines |
| **Essential Matrix E** | F ‡πÅ‡∏ö‡∏ö calibrated | ‡∏´‡∏≤ R, T |
| **Triangulation** | ‡∏´‡∏≤ 3D ‡∏à‡∏≤‡∏Å 2D correspondence | ‡∏™‡∏£‡πâ‡∏≤‡∏á point cloud |
| **Rectification** | ‡∏ó‡∏≥‡πÉ‡∏´‡πâ epipolar lines ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô | Matching ‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô |

### ‡∏™‡∏π‡∏ï‡∏£‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

**Epipolar Constraint**:
```
pR^T √ó F √ó pL = 0
```

**Depth from Disparity**:
```
Z = (f √ó b) / d
```

**3D Point from Disparity**:
```
X = (x - cx) √ó Z / f
Y = (y - cy) √ó Z / f
Z = (f √ó b) / d
```

### ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô

1. ‡∏ó‡∏≥‡πÑ‡∏° baseline ‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ‡πÑ‡∏°‡πà‡∏î‡∏µ?
2. Rectification ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏∞‡πÑ‡∏£?
3. Triangulation ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?
4. Epipolar line ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô‡∏´‡∏°‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?

---

# ‡∏ö‡∏ó‡∏ó‡∏µ‡πà 5: Stereo Rectification

## 5.1 ‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ç‡∏≠‡∏á‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á Unrectified

**‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞**:
- ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ã‡πâ‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Ç‡∏ß‡∏≤‡πÑ‡∏°‡πà parallel ‡∏Å‡∏±‡∏ô
- Epipolar lines ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏™‡πâ‡∏ô‡πÄ‡∏≠‡∏µ‡∏¢‡∏á, ‡πÇ‡∏Ñ‡πâ‡∏á
- Corresponding points ‡∏≠‡∏≤‡∏à‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà y ‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö**:
```
‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏∏‡∏î pL ‡∏ó‡∏µ‡πà (x=100, y=50):
  ‚Üí pR ‡∏≠‡∏≤‡∏à‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà (x=?, y=?) ‡πÉ‡∏î‡∏Å‡πá‡πÑ‡∏î‡πâ‡∏ö‡∏ô epipolar line
  ‚Üí ‡∏ï‡πâ‡∏≠‡∏á search 2D ‚ùå ‡∏ä‡πâ‡∏≤, ‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô
```

### ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡∏Ç‡∏≠‡∏á Rectification

**‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢**:
1. ‡∏ó‡∏≥‡πÉ‡∏´‡πâ image planes ‡∏Ç‡∏≠‡∏á 2 ‡∏Å‡∏•‡πâ‡∏≠‡∏á **coplanar** (‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏£‡∏∞‡∏ô‡∏≤‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô)
2. ‡∏ó‡∏≥‡πÉ‡∏´‡πâ epipolar lines ‡πÄ‡∏õ‡πá‡∏ô **horizontal** (‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô)
3. ‡∏ó‡∏≥‡πÉ‡∏´‡πâ corresponding points ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà **y ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô**

**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå**:
```
‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏∏‡∏î pL ‡∏ó‡∏µ‡πà (x=100, y=50):
  ‚Üí pR ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà (x=?, y=50) ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
  ‚Üí ‡∏ï‡πâ‡∏≠‡∏á search 1D (‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô) ‚úÖ ‡πÄ‡∏£‡πá‡∏ß, ‡∏á‡πà‡∏≤‡∏¢
```

## 5.2 ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£ Rectification

### Rotation ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Å‡∏•‡πâ‡∏≠‡∏á

**‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î**:
- ‡∏´‡∏°‡∏∏‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ã‡πâ‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢ R_L
- ‡∏´‡∏°‡∏∏‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏Ç‡∏ß‡∏≤‡∏î‡πâ‡∏ß‡∏¢ R_R
- ‡∏ó‡∏≥‡πÉ‡∏´‡πâ optical axes ‡∏Ç‡∏ô‡∏≤‡∏ô‡∏Å‡∏±‡∏ô

```
Before:                     After:
  CL       CR                 CL ‚îÄ‚îÄ‚Üí  CR ‚îÄ‚îÄ‚Üí
   ‚ï≤      ‚ï±                   (parallel)
    ‚ï≤    ‚ï±
     ‚ï≤  ‚ï±
      ‚ï≤‚ï±

Not parallel ‚ùå            Parallel ‚úÖ
```

### Coordinate System ‡πÉ‡∏´‡∏°‡πà

**Rectified Coordinate System**:
```
x-axis: ‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á baseline (CL ‚Üí CR)
z-axis: ‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ä‡∏µ‡πâ (perpendicular to baseline)
y-axis: ‡∏ï‡∏±‡πâ‡∏á‡∏â‡∏≤‡∏Å‡∏Å‡∏±‡∏ö x ‡πÅ‡∏•‡∏∞ z (right-hand rule)
```

**Rotation Matrix**:
```
       [e1x  e1y  e1z]     [r1x  r1y  r1z]
R_new =[e2x  e2y  e2z]  =  [r2x  r2y  r2z]
       [e3x  e3y  e3z]     [r3x  r3y  r3z]

‡πÇ‡∏î‡∏¢‡∏ó‡∏µ‡πà:
  e1 = T / ||T||        (x-axis: baseline direction)
  e2 = e3 √ó e1          (y-axis: ‡∏ï‡∏±‡πâ‡∏á‡∏â‡∏≤‡∏Å)
  e3 = arbitrary        (z-axis: average of optical axes)
```

### Projection Matrix ‡∏´‡∏•‡∏±‡∏á Rectification

**Left Camera**:
```
    [fx  0  cx  0  ]
PL =[0  fy  cy  0  ]
    [0   0   1  0  ]

(‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô K ‡πÅ‡∏ï‡πà‡∏Ç‡∏¢‡∏≤‡∏¢ 3√ó4)
```

**Right Camera**:
```
    [fx  0  cx  -fx*Tx]
PR =[0  fy  cy   0    ]
    [0   0   1   0    ]

Tx = ||T|| = baseline
```

**‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï**:
- `PL[:3, :3] = PR[:3, :3]` (intrinsics ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô)
- `PR[0, 3] = -fx * Tx` (‡∏Ç‡∏ß‡∏≤‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏à‡∏≤‡∏Å‡∏ã‡πâ‡∏≤‡∏¢ Tx)

## 5.3 ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Rectification Maps

### Rectification Mapping

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£**:
1. Rectify: ‡∏´‡∏≤ R_L, R_R, P_L, P_R
2. Create Maps: ‡∏™‡∏£‡πâ‡∏≤‡∏á lookup tables (map_x, map_y)
3. Remap: ‡πÉ‡∏ä‡πâ maps ‡πÅ‡∏õ‡∏•‡∏á‡∏†‡∏≤‡∏û

**OpenCV Implementation**:
```python
import cv2
import numpy as np

# Step 1: Rectify
R_L, R_R, P_L, P_R, Q, roi_L, roi_R = cv2.stereoRectify(
    cameraMatrix1=K_L,
    distCoeffs1=D_L,
    cameraMatrix2=K_R,
    distCoeffs2=D_R,
    imageSize=image_size,  # (width, height)
    R=R,                    # ‡∏à‡∏≤‡∏Å stereo calibration
    T=T,
    alpha=0,  # 0 = crop invalid pixels, 1 = keep all
    newImageSize=image_size
)

# Step 2: Create rectification maps
map_L_x, map_L_y = cv2.initUndistortRectifyMap(
    cameraMatrix=K_L,
    distCoeffs=D_L,
    R=R_L,           # Rectification rotation
    newCameraMatrix=P_L,
    size=image_size,
    m1type=cv2.CV_32FC1
)

map_R_x, map_R_y = cv2.initUndistortRectifyMap(
    cameraMatrix=K_R,
    distCoeffs=D_R,
    R=R_R,
    newCameraMatrix=P_R,
    size=image_size,
    m1type=cv2.CV_32FC1
)

# Step 3: Remap images
rectified_L = cv2.remap(
    src=image_L,
    map1=map_L_x,
    map2=map_L_y,
    interpolation=cv2.INTER_LINEAR
)

rectified_R = cv2.remap(
    src=image_R,
    map1=map_R_x,
    map2=map_R_y,
    interpolation=cv2.INTER_LINEAR
)
```

### ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Rectification

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡∏ß‡∏≤‡∏î‡πÄ‡∏™‡πâ‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô**
```python
# ‡∏ß‡∏≤‡∏î‡πÄ‡∏™‡πâ‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô
for y in range(0, height, 30):
    cv2.line(rectified_L, (0, y), (width, y), (0, 255, 0), 1)
    cv2.line(rectified_R, (0, y), (width, y), (0, 255, 0), 1)

# Stack ‡∏†‡∏≤‡∏û 2 ‡∏†‡∏≤‡∏û‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô
combined = np.hstack([rectified_L, rectified_R])
cv2.imshow('Rectified Stereo', combined)

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:
# ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏ö‡∏ô‡∏†‡∏≤‡∏û‡∏ã‡πâ‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Ç‡∏ß‡∏≤‡∏Ñ‡∏ß‡∏£‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡πÄ‡∏™‡πâ‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‚úÖ
```

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏ä‡πá‡∏Ñ y-coordinate ‡∏Ç‡∏≠‡∏á corresponding points**
```python
# ‡∏´‡∏≤‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô (features)
pts_L = cv2.goodFeaturesToTrack(rectified_L_gray, ...)
pts_R = cv2.goodFeaturesToTrack(rectified_R_gray, ...)

# Match features
matches = ...  # correspondence

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö y-coordinate
for match in matches:
    pt_L = pts_L[match.queryIdx]
    pt_R = pts_R[match.trainIdx]

    y_diff = abs(pt_L[1] - pt_R[1])

    if y_diff < 2:  # ‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 2 pixels
        print(f"‚úÖ Good: y_diff = {y_diff:.2f}")
    else:
        print(f"‚ùå Bad: y_diff = {y_diff:.2f}")
```

## 5.4 Q Matrix (Disparity-to-Depth Mapping)

### ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

**Q Matrix** (4√ó4) ‡πÉ‡∏ä‡πâ‡πÅ‡∏õ‡∏•‡∏á disparity map ‚Üí 3D point cloud

**‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö**:
```
    [1   0   0      -cx    ]
Q = [0   1   0      -cy    ]
    [0   0   0       f     ]
    [0   0  -1/Tx  (cx'-cx)/Tx]

‡πÇ‡∏î‡∏¢‡∏ó‡∏µ‡πà:
  f = focal length (fx ‡∏´‡∏£‡∏∑‡∏≠ fy)
  Tx = baseline
  cx, cy = principal point (left)
  cx' = principal point (right)
```

### ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Q Matrix

**‡πÅ‡∏õ‡∏•‡∏á Disparity ‚Üí 3D**:
```python
# ‡∏°‡∏µ disparity map (H√óW)
disparity = ...  # ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å stereo matching

# ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô 3D point cloud
points_3D = cv2.reprojectImageTo3D(
    disparity=disparity,
    Q=Q,
    handleMissingValues=True
)

# points_3D shape = (H, W, 3) = (X, Y, Z) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞ pixel

# ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏î‡∏∂‡∏á depth ‡∏ó‡∏µ‡πà pixel (x=100, y=50)
X = points_3D[50, 100, 0]
Y = points_3D[50, 100, 1]
Z = points_3D[50, 100, 2]

print(f"3D position: ({X:.2f}, {Y:.2f}, {Z:.2f}) mm")
```

**‡∏™‡∏π‡∏ï‡∏£‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á**:
```
‡∏à‡∏≤‡∏Å disparity d ‡∏ó‡∏µ‡πà pixel (x, y):

[X]       [x - cx          ]
[Y]       [y - cy          ]
[Z] = Q √ó [d              ]
[W]       [1              ]

‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏≤‡∏£ X, Y, Z ‡∏î‡πâ‡∏ß‡∏¢ W

‡∏´‡∏£‡∏∑‡∏≠‡∏á‡πà‡∏≤‡∏¢‡∏Å‡∏ß‡πà‡∏≤ (‡∏™‡∏°‡∏°‡∏∏‡∏ï‡∏¥ rectified):
  Z = f √ó Tx / d
  X = (x - cx) √ó Z / f
  Y = (y - cy) √ó Z / f
```

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì

**‡∏Å‡∏≥‡∏´‡∏ô‡∏î (‡∏à‡∏≤‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏à‡∏£‡∏¥‡∏á)**:
```
fx = 688.31 px
cx = 640 px
cy = 360 px
Tx = 60.57 mm  (baseline)

pixel (x=400, y=300) ‡∏°‡∏µ disparity = 200 px
```

**‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì 3D**:
```
Z = (688.31 √ó 60.57) / 200
  = 41699.85 / 200
  = 208.50 mm
  ‚âà 20.85 cm

X = (400 - 640) √ó 208.50 / 688.31
  = -240 √ó 208.50 / 688.31
  = -72.70 mm
  = -7.27 cm  (‡∏ã‡πâ‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏à‡∏∏‡∏î‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á)

Y = (300 - 360) √ó 208.50 / 688.31
  = -60 √ó 208.50 / 688.31
  = -18.17 mm
  = -1.82 cm  (‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏à‡∏∏‡∏î‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á)

‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á 3D = (-7.27 cm, -1.82 cm, 20.85 cm)
```

## 5.5 ROI (Region of Interest)

### ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢

‡∏´‡∏•‡∏±‡∏á rectification ‡∏ö‡∏≤‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà valid (‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•) ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£ crop

**ROI**: ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà valid ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ

```
Full Image:             Valid ROI:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚îÇ       ‚îÇ‚ñì‚ñì‚ñì‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚ñì‚îÇ
‚îÇ‚ñì‚ñì‚ñì‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚ñì‚îÇ  ‚Üí    ‚îÇ‚ñì‚ñì‚ñì‚îÇ Valid  ‚îÇ‚ñì‚îÇ
‚îÇ‚ñì‚ñì‚ñì‚îÇ Valid  ‚îÇ‚ñì‚îÇ       ‚îÇ‚ñì‚ñì‚ñì‚îÇ  Area  ‚îÇ‚ñì‚îÇ
‚îÇ‚ñì‚ñì‚ñì‚îÇ  Area  ‚îÇ‚ñì‚îÇ       ‚îÇ‚ñì‚ñì‚ñì‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚ñì‚îÇ
‚îÇ‚ñì‚ñì‚ñì‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚ñì‚îÇ       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚ñì = Invalid pixels
```

**Alpha Parameter**:
```
alpha = 0:
  - Crop ‡∏ó‡∏¥‡πâ‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà invalid ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  - ‡πÑ‡∏î‡πâ‡∏†‡∏≤‡∏û‡πÄ‡∏•‡πá‡∏Å‡∏•‡∏á ‡πÅ‡∏ï‡πà‡∏ó‡∏∏‡∏Å pixel valid

alpha = 1:
  - Keep all pixels
  - ‡πÑ‡∏î‡πâ‡∏†‡∏≤‡∏û‡πÄ‡∏ó‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏° ‡πÅ‡∏ï‡πà‡∏°‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà invalid

alpha = 0.5:
  - Compromise ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 2 ‡πÅ‡∏ö‡∏ö
```

### ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ ROI

```python
# ‡∏à‡∏≤‡∏Å stereoRectify
roi_L = ...  # (x, y, width, height)
roi_R = ...

# Crop ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ ROI
x, y, w, h = roi_L
rectified_L_cropped = rectified_L[y:y+h, x:x+w]

x, y, w, h = roi_R
rectified_R_cropped = rectified_R[y:y+h, x:x+w]

# ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô cropped images ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö stereo matching
```

## 5.6 ‡∏™‡∏£‡∏∏‡∏õ‡∏ö‡∏ó‡∏ó‡∏µ‡πà 5

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô Rectification

1. **Stereo Calibrate**: ‡∏´‡∏≤ R, T
2. **Stereo Rectify**: ‡∏´‡∏≤ R_L, R_R, P_L, P_R, Q
3. **Create Maps**: ‡∏™‡∏£‡πâ‡∏≤‡∏á map_x, map_y
4. **Remap Images**: ‡πÅ‡∏õ‡∏•‡∏á‡∏†‡∏≤‡∏û‡πÉ‡∏´‡πâ rectified
5. **Verify**: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö epipolar lines ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô

### ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ

| Before Rectification | After Rectification |
|----------------------|---------------------|
| ‚ùå Epipolar lines ‡πÄ‡∏≠‡∏µ‡∏¢‡∏á | ‚úÖ Epipolar lines ‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô |
| ‚ùå Search 2D | ‚úÖ Search 1D |
| ‚ùå y ‡∏≠‡∏≤‡∏à‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô | ‚úÖ y ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô (correspondence) |
| ‚ùå ‡∏ä‡πâ‡∏≤ | ‚úÖ ‡πÄ‡∏£‡πá‡∏ß |

### Parameters ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

| Parameter | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ | ‡∏Ñ‡πà‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ |
|-----------|----------|-----------|
| `alpha` | Cropping behavior | 0 (crop all invalid) |
| `Q` | Disparity‚Üí3D matrix | ‡∏à‡∏≤‡∏Å stereoRectify |
| `ROI` | Valid image region | ‡∏à‡∏≤‡∏Å stereoRectify |

### ‡∏ö‡∏ó‡∏ï‡πà‡∏≠‡πÑ‡∏õ

- ‡∏ö‡∏ó‡∏ó‡∏µ‡πà 6: Disparity ‡πÅ‡∏•‡∏∞ Depth Estimation (‡∏´‡∏≤ disparity ‡∏à‡∏≤‡∏Å rectified images)
- ‡∏ö‡∏ó‡∏ó‡∏µ‡πà 7: Stereo Matching Algorithms (StereoSGBM, StereoBM)

---

**(‡∏à‡∏∞‡∏°‡∏µ‡∏≠‡∏µ‡∏Å 3 ‡∏ö‡∏ó: Disparity & Depth, Stereo Matching, ‡πÅ‡∏•‡∏∞ Applications - ‡∏ï‡πà‡∏≠‡πÉ‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏±‡∏î‡πÑ‡∏õ)**
