## ЁЯУЕ Dataset Collection Progress (Week 2) - Oct 29, 2025

### ЁЯФм Experiment: Grid Layout Auto Crop

**р╣Бр╕Щр╕зр╕Др╕┤р╕Ф:** р╕Ыр╕гр╕░р╕лр╕вр╕▒р╕Фр╣Ар╕зр╕ер╕▓р╕Фр╣Йр╕зр╕вр╕Бр╕▓р╕гр╕зр╕▓р╕Зр╕Юр╕гр╕┤р╕Бр╕лр╕ер╕▓р╕вр╣Ар╕бр╣Зр╕Фр╕Юр╕гр╣Йр╕нр╕бр╕Бр╕▒р╕Щ р╣Бр╕ер╣Йр╕зр╣Гр╕Кр╣Й background subtraction crop р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤

**р╣Ар╕Ыр╣Йр╕▓р╕лр╕бр╕▓р╕в:**
- р╕зр╕▓р╕Зр╕Юр╕гр╕┤р╕Б 4-10 р╣Ар╕бр╣Зр╕Фр╕Юр╕гр╣Йр╕нр╕бр╕Бр╕▒р╕Щ (р╕лр╣Ир╕▓р╕Зр╕Бр╕▒р╕Щ 3-5cm)
- р╕Цр╣Ир╕▓р╕в 4 р╕бр╕╕р╕б (р╕лр╕бр╕╕р╕Щр╕Юр╕╖р╣Йр╕Щ 0┬░, 90┬░, 180┬░, 270┬░)
- Auto crop р╣Бр╕Хр╣Ир╕ер╕░р╕Хр╕▒р╕з тЖТ р╕Ыр╕гр╕░р╕лр╕вр╕▒р╕Фр╣Ар╕зр╕ер╕▓ ~10├Ч (2 р╕Кр╕▒р╣Ир╕зр╣Вр╕бр╕З тЖТ 15 р╕Щр╕▓р╕Чр╕╡)

---

### ЁЯзк р╕Ьр╕ер╕Бр╕▓р╕гр╕Чр╕Фр╕ер╕нр╕З (3 р╕гр╕нр╕Ъ)

#### **р╕гр╕нр╕Ър╕Чр╕╡р╣И 1: р╕Юр╕╖р╣Йр╕Щр╕Вр╕▓р╕з A4**
```
Setup:
- р╕Юр╕╖р╣Йр╕Щ: р╕Бр╕гр╕░р╕Фр╕▓р╕йр╕Вр╕▓р╕з A4
- р╕Юр╕гр╕┤р╕Б: 4 р╣Ар╕бр╣Зр╕Ф (р╣Бр╕Фр╕Зр╣Гр╕лр╕Нр╣И)
- Exposure: 30ms, Gain: 2
- Threshold: 180

р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М:
тЭМ Success Rate: 18.75% (3/16 peppers detected)

р╕Ыр╕▒р╕Нр╕лр╕▓:
- Chromatic aberration р╕кр╕╣р╕Зр╕бр╕▓р╕Б (р╕Вр╕нр╕Ър╕Юр╕гр╕┤р╕Бр╣Ар╕Ыр╣Зр╕Щр╕кр╕╡р╕Щр╣Йр╕│р╣Ар╕Зр╕┤р╕Щ-р╕бр╣Ир╕зр╕З)
- р╕Бр╕ер╣Йр╕нр╕З stereo + р╕Юр╕╖р╣Йр╕Щр╕Вр╕▓р╕зр╕кр╕зр╣Ир╕▓р╕З тЖТ overexposure + color fringing
- Binary mask р╣Бр╕вр╕Бр╣Др╕бр╣Ир╣Др╕Фр╣Йр╕зр╣Ир╕▓р╕кр╣Ир╕зр╕Щр╣Др╕лр╕Щр╕Др╕╖р╕нр╕Юр╕гр╕┤р╕Б
```

#### **р╕гр╕нр╕Ър╕Чр╕╡р╣И 2: р╣Бр╕Ьр╣Ир╕Щр╕Фр╕│ (Cutting Mat/р╕кр╕▓р╕вр╕Юр╕▓р╕Щ)**
```
Setup:
- р╕Юр╕╖р╣Йр╕Щ: р╣Бр╕Ьр╣Ир╕Щр╕кр╕▓р╕вр╕Юр╕▓р╕Щр╕Фр╕│ (р╕бр╕╡ texture)
- р╕Юр╕гр╕┤р╕Б: 4 р╣Ар╕бр╣Зр╕Ф
- Exposure: 30ms тЖТ 24ms
- Threshold: 100-120

р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М:
тЭМ Success Rate: 6.25% (1/16 peppers detected)

р╕Ыр╕▒р╕Нр╕лр╕▓:
- р╕Юр╕╖р╣Йр╕Щр╕бр╕╡ texture/р╕ер╕зр╕Фр╕ер╕▓р╕в тЖТ threshold р╕кр╕▒р╕Ър╕кр╕Щ
- р╣Бр╕кр╕Зр╣Др╕бр╣Ир╕кр╕бр╣Ир╕│р╣Ар╕кр╕бр╕н (р╕Бр╕ер╕▓р╕Зр╕кр╕зр╣Ир╕▓р╕З, р╕Вр╕нр╕Ър╕бр╕╖р╕Ф) тЖТ gradient р╕бр╕▓р╕Б
- Overexposure р╕Чр╕│р╣Гр╕лр╣Йр╕Юр╕╖р╣Йр╕Щр╕Фр╕╣р╣Ар╕Ыр╣Зр╕Щр╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕з (р╕Ир╕гр╕┤р╕Зр╣Ж р╣Ар╕Ыр╣Зр╕Щр╕кр╕╡р╕Фр╕│)
```

#### **р╕гр╕нр╕Ър╕Чр╕╡р╣И 3: р╕Ьр╣Йр╕▓р╕Фр╕│р╕Ир╕гр╕┤р╕З + р╕ер╕Ф Exposure**
```
Setup:
- р╕Юр╕╖р╣Йр╕Щ: р╕Ьр╣Йр╕▓р╕Фр╕│ (р╕бр╕╡ texture р╕Ьр╣Йр╕▓)
- р╕Юр╕гр╕┤р╕Б: 4 р╣Ар╕бр╣Зр╕Ф
- Exposure: 24ms тЖТ 15ms (р╕ер╕Фр╣Бр╕кр╕З 50%)
- Gain: 2 тЖТ 1.5
- Threshold: 90-120

р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М:
тЭМ Success Rate: 0% (0/16 peppers detected)

р╕Ыр╕▒р╕Нр╕лр╕▓:
- р╕Ьр╣Йр╕▓р╕бр╕╡ texture р╕бр╕▓р╕Бр╕Бр╕зр╣Ир╕▓р╣Бр╕Ьр╣Ир╕Щр╕кр╕▓р╕вр╕Юр╕▓р╕Щ
- Binary mask: р╕Юр╕гр╕┤р╕Бр╣Бр╕ер╕░р╕Юр╕╖р╣Йр╕Щр╣Ар╕Ыр╣Зр╕Щр╕кр╕╡р╣Ар╕Фр╕╡р╕вр╕зр╕Бр╕▒р╕Щ (р╣Бр╕вр╕Бр╣Др╕бр╣Ир╕нр╕нр╕Б)
- р╣Бр╕бр╣Йр╕ер╕Ф exposure р╣Бр╕ер╣Йр╕з р╕Юр╕╖р╣Йр╕Щр╕вр╕▒р╕Зр╕Фр╕╣р╣Ар╕Ыр╣Зр╕Щр╕кр╕╡р╣Ар╕Чр╕▓-р╕бр╣Ир╕зр╕З (р╣Др╕бр╣Ир╣Гр╕Кр╣Ир╕Фр╕│)
```

---

### ЁЯУК р╕кр╕гр╕╕р╕Ыр╕Ьр╕ер╕Бр╕▓р╕гр╕Чр╕Фр╕ер╕нр╕З Grid Layout

| р╕гр╕нр╕Ъ | р╕Юр╕╖р╣Йр╕Щ | Exposure | Success Rate | р╕Ыр╕▒р╕Нр╕лр╕▓р╕лр╕ер╕▒р╕Б |
|-----|------|----------|--------------|-----------|
| 1 | р╕Вр╕▓р╕з A4 | 30ms | **18.75%** | Chromatic aberration |
| 2 | р╣Бр╕Ьр╣Ир╕Щр╕Фр╕│ texture | 24ms | **6.25%** | Texture + gradient |
| 3 | р╕Ьр╣Йр╕▓р╕Фр╕│ texture | 15ms | **0%** | Texture р╕бр╕▓р╕Б + р╣Др╕бр╣И uniform |

**р╕кр╕гр╕╕р╕Ы:** Grid Layout Auto Crop **р╣Др╕бр╣Ир╣Ар╕лр╕бр╕▓р╕░р╕Бр╕▒р╕Ъ setup р╕Щр╕╡р╣Й**

---

### ЁЯФН Root Cause Analysis

**р╕Ыр╕▒р╕Нр╕лр╕▓ 3 р╕Вр╣Йр╕нр╕лр╕ер╕▒р╕Б:**

1. **тЭМ р╕Юр╕╖р╣Йр╕Щр╕бр╕╡ Texture**
   - р╕Ьр╣Йр╕▓/р╕кр╕▓р╕вр╕Юр╕▓р╕Щ р╕бр╕╡р╕ер╕зр╕Фр╕ер╕▓р╕в р╣Др╕бр╣Ир╣Ар╕гр╕╡р╕вр╕Ъ uniform
   - Brightness threshold р╣Бр╕вр╕Бр╣Др╕бр╣Ир╣Др╕Фр╣Йр╕зр╣Ир╕▓р╕кр╣Ир╕зр╕Щр╣Др╕лр╕Щр╕Др╕╖р╕нр╕Юр╕╖р╣Йр╕Щ р╕кр╣Ир╕зр╕Щр╣Др╕лр╕Щр╕Др╕╖р╕нр╕Юр╕гр╕┤р╕Б
   - Binary mask р╕Ьр╕┤р╕Фр╕Юр╕ер╕▓р╕Фр╕нр╕вр╣Ир╕▓р╕Зр╕гр╕╕р╕Щр╣Бр╕гр╕З

2. **тЭМ р╣Бр╕кр╕Зр╣Др╕бр╣Ир╕кр╕бр╣Ир╕│р╣Ар╕кр╕бр╕н**
   - LED 3 р╕Фр╕зр╕З (Top, Left, Right) тЖТ р╕бр╕╡ gradient (р╕Бр╕ер╕▓р╕Зр╕кр╕зр╣Ир╕▓р╕З, р╕Вр╕нр╕Ър╕бр╕╖р╕Ф)
   - Background subtraction р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╣Бр╕кр╕З uniform 100%
   - р╣Др╕бр╣Ир╕бр╕╡ lightbox р╕лр╕гр╕╖р╕н LED panel diffuser

3. **тЭМ р╕Бр╕ер╣Йр╕нр╕З Stereo р╕бр╕╡ Chromatic Aberration**
   - Lens distortion + wide-angle тЖТ р╕кр╕╡р╕Ьр╕┤р╕Фр╣Ар╕Юр╕╡р╣Йр╕вр╕Щр╕Чр╕╡р╣Ир╕Вр╕нр╕Ър╕ар╕▓р╕Ю
   - р╕Юр╕╖р╣Йр╕Щр╕Вр╕▓р╕зр╕кр╕зр╣Ир╕▓р╕З тЖТ р╣Ар╕Бр╕┤р╕Ф color fringing (р╕Вр╕нр╕Ър╕кр╕╡р╕Щр╣Йр╕│р╣Ар╕Зр╕┤р╕Щ-р╕бр╣Ир╕зр╕З)
   - р╕ер╕Ф exposure р╕Кр╣Ир╕зр╕вр╣Др╕Фр╣Йр╕Ър╣Йр╕▓р╕З р╣Бр╕Хр╣Ир╣Др╕бр╣Ир╕лр╕▓р╕вр╕лр╕бр╕Ф

---

### тЬЕ р╕Вр╣Йр╕нр╕кр╕гр╕╕р╕Ыр╣Бр╕ер╕░р╕Бр╕▓р╕гр╕Хр╕▒р╕Фр╕кр╕┤р╕Щр╣Гр╕И

**Background Subtraction Method р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г:**
- тЬЕ р╕Юр╕╖р╣Йр╕Щр╣Ар╕гр╕╡р╕вр╕Ъ 100% uniform (р╕Бр╕гр╕░р╕Фр╕▓р╕й, р╣Вр╕Яр╕бр╕Ър╕нр╕гр╣Мр╕Ф - **р╣Др╕бр╣Ир╣Гр╕Кр╣Ир╕Ьр╣Йр╕▓**)
- тЬЕ р╣Бр╕кр╕Зр╕кр╕бр╣Ир╕│р╣Ар╕кр╕бр╕н 100% (LED panel/lightbox professional)
- тЬЕ р╕Бр╕ер╣Йр╕нр╕З RGB р╕Шр╕гр╕гр╕бр╕Фр╕▓ (р╣Др╕бр╣Ир╣Гр╕Кр╣И stereo wide-angle)

**р╕Чр╕▓р╕Зр╣Ар╕ер╕╖р╕нр╕Бр╕Чр╕╡р╣Ир╕бр╕╡:**
1. **Option A:** р╕Лр╕╖р╣Йр╕нр╕нр╕╕р╕Ыр╕Бр╕гр╕Ур╣Мр╣Гр╕лр╕бр╣И (р╕Бр╕гр╕░р╕Фр╕▓р╕йр╕Фр╕│ A3 + LED panel) - р╕Зр╕Ъ 500-1,500 р╕Ър╕▓р╕Ч
2. **Option B:** Manual Capture тнР **р╣Ар╕ер╕╖р╕нр╕Бр╕Чр╕▓р╕Зр╕Щр╕╡р╣Й**

---

### ЁЯОп р╣Бр╕Ьр╕Щр╣Гр╕лр╕бр╣И: Manual Capture Method

**р╣Ар╕лр╕Хр╕╕р╕Ьр╕е:**
- тЬЕ р╣Гр╕Кр╣Йр╣Др╕Фр╣Йр╣Бр╕Щр╣Ир╕Щр╕нр╕Щ 100%
- тЬЕ р╣Др╕бр╣Ир╕Хр╣Йр╕нр╕Зр╕Лр╕╖р╣Йр╕нр╕нр╕╕р╕Ыр╕Бр╕гр╕Ур╣Мр╣Ар╕Юр╕┤р╣Ир╕б
- тЬЕ р╣Ар╕гр╕┤р╣Ир╕бр╣Др╕Фр╣Йр╕Чр╕▒р╕Щр╕Чр╕╡
- тП░ р╣Гр╕Кр╣Йр╣Ар╕зр╕ер╕▓ ~2-3 р╕Кр╕▒р╣Ир╕зр╣Вр╕бр╕З (р╕вр╕нр╕бр╕гр╕▒р╕Ър╣Др╕Фр╣Й)

**р╕зр╕┤р╕Шр╕╡р╕Бр╕▓р╕г:**
```
1. р╕зр╕▓р╕Зр╕Юр╕гр╕┤р╕Б 1 р╕Ьр╕е р╕Бр╕ер╕▓р╕Зр╕Юр╕╖р╣Йр╕Щ (р╣Гр╕Кр╣Йр╕Ьр╣Йр╕▓р╕Фр╕│р╕Чр╕╡р╣Ир╕бр╕╡р╕нр╕вр╕╣р╣И)
2. р╕Цр╣Ир╕▓р╕вр╕ар╕▓р╕Ю 12 р╕бр╕╕р╕б (р╕лр╕бр╕╕р╕Щр╕Юр╕гр╕┤р╕Б 30┬░ р╕Чр╕╡р╕ер╕░р╕Др╕гр╕▒р╣Йр╕З)
   - 0┬░, 30┬░, 60┬░, 90┬░, 120┬░, 150┬░, 180┬░, 210┬░, 240┬░, 270┬░, 300┬░, 330┬░
3. р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕Ьр╕ер╣Гр╕лр╕бр╣И р╕Чр╕│р╕Лр╣Йр╕│
4. р╕гр╕зр╕б: 31 р╕Ьр╕е ├Ч 12 р╕бр╕╕р╕б = 372 р╕ар╕▓р╕Ю

Setup:
python3 collect_dataset.py --exposure 24 --gain 2 --output pepper_dataset_manual
```

**Timeline:**
- 1 р╕Ьр╕е тЙИ 3-4 р╕Щр╕▓р╕Чр╕╡
- 31 р╕Ьр╕е тЙИ 2 р╕Кр╕▒р╣Ир╕зр╣Вр╕бр╕З
- р╣Бр╕Ър╣Ир╕Зр╣Ар╕Ыр╣Зр╕Щ 3 sessions (р╣Бр╕Фр╕Зр╣Гр╕лр╕Нр╣И, р╣Бр╕Фр╕Зр╕Бр╕ер╕▓р╕З, р╣Ар╕Вр╕╡р╕вр╕з)

**Status:** 
- ЁЯЯб р╕Бр╕│р╕ер╕▒р╕Зр╕Чр╕Фр╕кр╕нр╕Ъ 1 р╕Ьр╕е 12 р╕бр╕╕р╕б р╕Бр╣Ир╕нр╕Щр╣Ар╕Бр╣Зр╕Ър╣Ар╕Хр╣Зр╕бр╕гр╕╣р╕Ыр╣Бр╕Ър╕Ъ
- тП│ р╕гр╕нр╕Ьр╕ер╕Чр╕Фр╕кр╕нр╕Ър╣Ар╕Юр╕╖р╣Ир╕нр╕Ыр╕гр╕▒р╕Ър╣Бр╕Хр╣Ир╕З setup (р╕Цр╣Йр╕▓р╕Ир╕│р╣Ар╕Ыр╣Зр╕Щ)

---

### ЁЯУЭ Lessons Learned

**р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╣Ар╕гр╕╡р╕вр╕Щр╕гр╕╣р╣Й:**
1. тЬЕ Grid Layout р╕Фр╕╣р╕Фр╕╡р╕Ър╕Щр╕Бр╕гр╕░р╕Фр╕▓р╕й р╣Бр╕Хр╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г setup р╣Бр╕Ър╕Ъ lab professional
2. тЬЕ р╕Бр╕ер╣Йр╕нр╕З stereo wide-angle р╕бр╕╡ chromatic aberration р╕бр╕▓р╕Б (р╕Юр╕╖р╣Йр╕Щр╕Вр╕▓р╕з + overexposure)
3. тЬЕ Texture р╕Юр╕╖р╣Йр╕Щр╕кр╕│р╕Др╕▒р╕Нр╕бр╕▓р╕Бр╕кр╕│р╕лр╕гр╕▒р╕Ъ background subtraction (р╕Ьр╣Йр╕▓ < р╕Бр╕гр╕░р╕Фр╕▓р╕й)
4. тЬЕ р╣Бр╕кр╕З LED 3 р╕Фр╕зр╕Зр╣Др╕бр╣Ир╣Ар╕Юр╕╡р╕вр╕Зр╕Юр╕нр╕кр╕│р╕лр╕гр╕▒р╕Ъ auto crop (р╕Хр╣Йр╕нр╕З LED panel diffuser)
5. тЬЕ Manual capture р╕Кр╣Йр╕▓р╕Бр╕зр╣Ир╕▓ р╣Бр╕Хр╣И **reliable 100%**

**р╣Бр╕Щр╕░р╕Щр╕│р╕кр╕│р╕лр╕гр╕▒р╕Ър╕нр╕Щр╕▓р╕Др╕Х:**
- Grid Layout р╣Ар╕лр╕бр╕▓р╕░р╕Бр╕▒р╕Ъ: Lab setup, budget >2,000р╕┐, RGB camera
- Manual capture р╣Ар╕лр╕бр╕▓р╕░р╕Бр╕▒р╕Ъ: Home/small lab, budget <500р╕┐, reliable

---

### ЁЯЫая╕П Tools Created

**Script: `auto_crop_grid.py`**
```bash
# Auto-crop peppers from grid layout images
python3 auto_crop_grid.py \
  --label pepper_red_fresh \
  --images set1_*.jpg \
  --threshold 180 \
  --min-area 1500 \
  --save-debug
```

**Features:**
- Background subtraction (Otsu threshold + manual)
- Contour detection with filtering (area, aspect ratio, solidity)
- Automatic crop with padding
- Debug visualization (mask + detection)
- Batch processing multiple images

**Status:** тЪая╕П р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Др╕Фр╣Й р╣Бр╕Хр╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г setup р╕Чр╕╡р╣Ир╣Ар╕лр╕бр╕▓р╕░р╕кр╕б (р╕Юр╕╖р╣Йр╕Щр╣Ар╕гр╕╡р╕вр╕Ъ + р╣Бр╕кр╕З uniform)

---

**Updated:** Oct 29, 2025 09:10 AM
**Next Step:** р╕Чр╕Фр╕кр╕нр╕Ъ Manual capture 1 р╕Ьр╕е 12 р╕бр╕╕р╕б тЖТ Review тЖТ р╣Ар╕Бр╣Зр╕Ъ dataset р╣Ар╕Хр╣Зр╕бр╕гр╕╣р╕Ыр╣Бр╕Ър╕Ъ


---

## ЁЯОЙ Manual Capture Method - Success! (Oct 29, 2025 09:30 AM)

### тЬЕ р╕Ьр╕ер╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ

**Pilot Test: 1 р╕Ьр╕е ├Ч 12 р╕бр╕╕р╕б**
```
Setup:
- р╕Юр╕╖р╣Йр╕Щ: р╕Ьр╣Йр╕▓р╕Фр╕│ (р╕бр╕╡ texture - р╣Др╕бр╣Ир╣Ар╕Ыр╣Зр╕Щр╕Ыр╕▒р╕Нр╕лр╕▓)
- Exposure: 24ms (р╕ер╕Ф 20% р╕Ир╕▓р╕Бр╣Ар╕Фр╕┤р╕б)
- Gain: 2
- р╣Бр╕кр╕З: LED 3 р╕Фр╕зр╕З (Top, Left, Right)

р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М: тЬЕ 100% Success
- 12 р╕ар╕▓р╕Юр╕Др╕гр╕Ъ, р╕Кр╕▒р╕Фр╣Ар╕Ир╕Щр╕Чр╕╕р╕Бр╕бр╕╕р╕б
- Contrast р╕Фр╕╡р╣Ар╕вр╕╡р╣Ир╕вр╕б (р╕Юр╕гр╕┤р╕Бр╕Кр╕▒р╕Ф vs р╕Юр╕╖р╣Йр╕Щр╕Фр╕│)
- р╣Бр╕кр╕Зр╕кр╕бр╣Ир╕│р╣Ар╕кр╕бр╕н, р╣Др╕бр╣Ир╕бр╕╡ glare
- р╕Юр╕гр╕┤р╕Бр╕нр╕вр╕╣р╣Ир╕Бр╕ер╕▓р╕Зр╕Бр╕гр╕нр╕Ър╕Чр╕╕р╕Бр╕ар╕▓р╕Ю

р╣Ар╕зр╕ер╕▓: ~3 р╕Щр╕▓р╕Чр╕╡/р╕Ьр╕е
```

---

### ЁЯУК Session 1: р╕Юр╕гр╕┤р╕Бр╣Бр╕Фр╕Зр╣Гр╕лр╕Нр╣И - р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕бр╕Ър╕╣р╕гр╕Ур╣М

**Dataset Collected:**
```
Session: session1_red_large
Peppers: 8 р╕Ьр╕е
Images: 96 р╕ар╕▓р╕Ю (8 ├Ч 12 р╕бр╕╕р╕б)
Time: 9 р╕Щр╕▓р╕Чр╕╡ (09:36-09:45)
Average: 1.1 р╕Щр╕▓р╕Чр╕╡/р╕Ьр╕е (р╣Ар╕гр╣Зр╕зр╕Бр╕зр╣Ир╕▓р╕Др╕▓р╕Ф 3├Ч!)

Quality: тЬЕ Excellent
- Resolution: 1280├Ч720 JPEG
- Lighting: Consistent
- Focus: Sharp
- Coverage: 360┬░ per pepper
```

**Label Distribution (р╕Хр╣Йр╕нр╕Зр╕Ър╕▒р╕Щр╕Чр╕╢р╕Б):**
```
pepper_0000-0011: fresh/rotten (р╕Ьр╕ер╕Чр╕╡р╣И 1)
pepper_0012-0023: fresh/rotten (р╕Ьр╕ер╕Чр╕╡р╣И 2)
pepper_0024-0035: fresh/rotten (р╕Ьр╕ер╕Чр╕╡р╣И 3)
pepper_0036-0047: fresh/rotten (р╕Ьр╕ер╕Чр╕╡р╣И 4)
pepper_0048-0059: fresh/rotten (р╕Ьр╕ер╕Чр╕╡р╣И 5)
pepper_0060-0071: fresh/rotten (р╕Ьр╕ер╕Чр╕╡р╣И 6)
pepper_0072-0083: fresh/rotten (р╕Ьр╕ер╕Чр╕╡р╣И 7)
pepper_0084-0095: fresh/rotten (р╕Ьр╕ер╕Чр╕╡р╣И 8)
```

---

### ЁЯУЛ Session 2: Defect Types - р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕бр╕Ър╕╣р╕гр╕Ур╣М тЬЕ

**Strategy: р╣Бр╕вр╕Бр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣Мр╕Хр╕▓р╕бр╕Ыр╕гр╕░р╣Ар╕ар╕Ч**

р╣Ар╕лр╕Хр╕╕р╕Ьр╕е:
- тЬЕ р╕Кр╕╖р╣Ир╕нр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М = Label (р╕Кр╕▒р╕Фр╣Ар╕Ир╕Щ)
- тЬЕ р╣Ар╕Юр╕┤р╣Ир╕б dataset р╣Гр╕Щр╕нр╕Щр╕▓р╕Др╕Хр╕Зр╣Ир╕▓р╕в
- тЬЕ Train/Val split р╕Зр╣Ир╕▓р╕в (р╣Бр╕Ър╣Ир╕Зр╕Хр╕▓р╕бр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М)

**Dataset Collected:**
```
Session 2.1: session2_red_rotten/    тЬЕ 12 р╕ар╕▓р╕Ю (р╕Юр╕гр╕┤р╕Бр╣Бр╕Фр╕Зр╣Ар╕Щр╣Ир╕▓)
Session 2.2: session2_red_insect/    тЬЕ 12 р╕ар╕▓р╕Ю (р╕Юр╕гр╕┤р╕Бр╣Бр╕Фр╕Зр╣Бр╕бр╕ер╕Зр╣Ар╕Ир╕▓р╕░)
Session 2.3: session2_red_deformed/  тЬЕ 12 р╕ар╕▓р╕Ю (р╕Юр╕гр╕┤р╕Бр╣Бр╕Фр╕Зр╕Зр╕н)
Session 2.4: session2_red_wrinkled/  тЬЕ 12 р╕ар╕▓р╕Ю (р╕Юр╕гр╕┤р╕Бр╣Бр╕Фр╕Зр╣Ар╕лр╕╡р╣Ир╕вр╕з)

Total: 48 р╕ар╕▓р╕Ю (4 р╕Ьр╕е ├Ч 12 р╕бр╕╕р╕б)
Quality: тЬЕ Excellent
Settings: exposure=24ms, gain=2
```

**р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Чр╕╡р╣Ир╣Гр╕Кр╣Й:**
```bash
# Session 2.1: р╕Юр╕гр╕┤р╕Бр╣Бр╕Фр╕Зр╣Ар╕Щр╣Ир╕▓
python3 collect_dataset.py --exposure 24 --gain 2 --output pepper_dataset/session2_red_rotten

# Session 2.2: р╕Юр╕гр╕┤р╕Бр╣Бр╕Фр╕Зр╣Бр╕бр╕ер╕Зр╣Ар╕Ир╕▓р╕░
python3 collect_dataset.py --exposure 24 --gain 2 --output pepper_dataset/session2_red_insect

# Session 2.3: р╕Юр╕гр╕┤р╕Бр╣Бр╕Фр╕Зр╕Зр╕н
python3 collect_dataset.py --exposure 24 --gain 2 --output pepper_dataset/session2_red_deformed

# Session 2.4: р╕Юр╕гр╕┤р╕Бр╣Бр╕Фр╕Зр╣Ар╕лр╕╡р╣Ир╕вр╕з
python3 collect_dataset.py --exposure 24 --gain 2 --output pepper_dataset/session2_red_wrinkled
```

---

### ЁЯЧВя╕П Dataset Structure (Current)

```
pepper_dataset/
тФЬтФАтФА session1_red_large/           тЬЕ 96 р╕ар╕▓р╕Ю (8 р╕Ьр╕е ├Ч 12 р╕бр╕╕р╕б)
тФВ   тФЬтФАтФА raw/left/
тФВ   тФВ   тФФтФАтФА pepper_0000-0095.jpg
тФВ   тФФтФАтФА metadata/
тФВ       тФФтФАтФА collection_log.yaml
тФВ
тФЬтФАтФА session2_red_rotten/          тЬЕ 12 р╕ар╕▓р╕Ю (1 р╕Ьр╕е ├Ч 12 р╕бр╕╕р╕б)
тФЬтФАтФА session2_red_insect/          тЬЕ 12 р╕ар╕▓р╕Ю (1 р╕Ьр╕е ├Ч 12 р╕бр╕╕р╕б)
тФЬтФАтФА session2_red_deformed/        тЬЕ 12 р╕ар╕▓р╕Ю (1 р╕Ьр╕е ├Ч 12 р╕бр╕╕р╕б)
тФЬтФАтФА session2_red_wrinkled/        тЬЕ 12 р╕ар╕▓р╕Ю (1 р╕Ьр╕е ├Ч 12 р╕бр╕╕р╕б)
тФВ
тФФтФАтФА session3_green_*/             тП│ р╕вр╕▒р╕Зр╣Др╕бр╣Ир╣Др╕Фр╣Йр╕Чр╕│

Total: 144 images (12 peppers)
```

---

### ЁЯУИ Progress Summary

**Completed:**
- тЬЕ Grid Layout Experiments (3 rounds) - Failed but learned
- тЬЕ Manual Capture Setup - Success
- тЬЕ Pilot Test (1 pepper) - 100%
- тЬЕ Session 1: Red large peppers (8 р╕Ьр╕е) - 96 images
- тЬЕ Session 2: Defect types (4 р╕Ьр╕е) - 48 images
  - тЬЕ 2.1: Red rotten (р╣Ар╕Щр╣Ир╕▓)
  - тЬЕ 2.2: Red insect (р╣Бр╕бр╕ер╕Зр╣Ар╕Ир╕▓р╕░)
  - тЬЕ 2.3: Red deformed (р╕Зр╕н)
  - тЬЕ 2.4: Red wrinkled (р╣Ар╕лр╕╡р╣Ир╕вр╕з)

**Total Dataset: 144 images (12 peppers ├Ч 12 angles)**

**Pending:**
- тП│ Session 3 (Green peppers - optional)
- тП│ Label annotation (Roboflow/LabelImg)
- тП│ Train/Val split
- тП│ YOLO training (Week 3)

---

### тП▒я╕П Time Tracking

| Task | Planned | Actual | Note |
|------|---------|--------|------|
| Grid Layout Exp | 30 min | 2 hours | Failed - learned lessons |
| Manual Setup | 10 min | 10 min | тЬЕ |
| Pilot Test | 5 min | 3 min | тЬЕ Faster! |
| Session 1 | 30 min | 9 min | ЁЯЪА 3├Ч faster! |
| Session 2 (4 sessions) | 16 min | ~15 min | тЬЕ On target! |

**Total Dataset Collection Time:** ~24 minutes (144 images)
**Average:** 2 minutes per pepper, 10 seconds per image
**Efficiency:** ЁЯЪА Exceeded expectations!

---

### ЁЯОп Key Learnings

**What Worked:**
1. тЬЕ **Manual capture** reliable 100%
2. тЬЕ **р╕Ьр╣Йр╕▓р╕Фр╕│** sufficient (texture OK for manual)
3. тЬЕ **Exposure 24ms** perfect balance
4. тЬЕ **12 angles** comprehensive coverage
5. тЬЕ **Single session workflow** very fast (1 min/pepper)

**What Didn't Work:**
1. тЭМ Grid layout auto crop (texture + lighting issues)
2. тЭМ White background (chromatic aberration)
3. тЭМ Overexposure (30ms too bright)

**For Future:**
- Grid layout requires: smooth background + LED panel/lightbox
- Manual capture: faster than expected, scales well
- Defect separation by folder: good for organization

---

**Updated:** Oct 29, 2025 02:45 PM
**Status:** Session 1-2 Complete! тЬЕ (144 images)
**Next:** Annotation тЖТ YOLO Training (Week 3)

---

## ЁЯФН Critical Discovery: Auto-Focus Problem (Oct 29, 2025 Evening)

### тЪая╕П Problem Discovered

р╕гр╕░р╕лр╕зр╣Ир╕▓р╕Зр╣Ар╕Бр╣Зр╕Ъ Session 3.1 (Green peppers) р╕кр╕▒р╕Зр╣Ар╕Бр╕Хр╕Ыр╕▒р╕Нр╕лр╕▓:

**р╕Юр╕др╕Хр╕┤р╕Бр╕гр╕гр╕бр╕Чр╕╡р╣Ир╕Юр╕Ъ:**
```
1. р╕зр╕▓р╕Зр╕Юр╕гр╕┤р╕Б тЖТ р╕бр╕╖р╕нр╕вр╕▒р╕Зр╕нр╕вр╕╣р╣Ир╣Гр╕Щр╣Ар╕Яр╕гр╕б
   тЖТ р╕Бр╕ер╣Йр╕нр╕З focus р╕Чр╕╡р╣Ир╕бр╕╖р╕н (sharp)

2. р╣Ар╕нр╕▓р╕бр╕╖р╕нр╕нр╕нр╕Б тЖТ р╕зр╕┤р╕Щр╕▓р╕Чр╕╡р╣Бр╕гр╕Б
   тЖТ р╕ар╕▓р╕Юр╕Юр╕гр╕┤р╕Бр╕Кр╕▒р╕Фр╕бр╕▓р╕Б! texture р╣Ар╕лр╣Зр╕Щр╕Кр╕▒р╕Фр╣Ар╕Ир╕Щ тЬЕ

3. р╕лр╕ер╕▒р╕Зр╕Ир╕▓р╕Б 1-2 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡р╕Цр╕▒р╕Фр╕бр╕▓
   тЖТ р╕ар╕▓р╕Юр╕Юр╕гр╕┤р╕Бр╣Ар╕Ър╕ер╕н тЭМ
   тЖТ texture р╣Др╕бр╣Ир╕Кр╕▒р╕Ф, surface details р╕лр╕▓р╕в
```

**р╕Ьр╕ер╕Бр╕гр╕░р╕Чр╕Ъ:**
- тЬЕ Dataset Session 1 (96 images): **р╣Ар╕Ър╕ер╕н, texture р╣Др╕бр╣Ир╕Кр╕▒р╕Ф**
- тЬЕ Dataset Session 2 (48 images): **р╣Ар╕Ър╕ер╕н, texture р╣Др╕бр╣Ир╕Кр╕▒р╕Ф**
- тЭМ р╣Др╕бр╣Ир╣Ар╕лр╕бр╕▓р╕░р╕кр╕│р╕лр╕гр╕▒р╕Ъ YOLO training (р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г sharp images)

---

### ЁЯФм Investigation

**Root Cause:** GStreamer pipeline р╣Гр╕Кр╣Й auto-focus р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ

р╕Бр╕ер╣Йр╕нр╕З IMX219 р╕бр╕╡р╕Юр╕др╕Хр╕┤р╕Бр╕гр╕гр╕б:
1. р╕бр╕╖р╕нр╣Ар╕Вр╣Йр╕▓р╣Ар╕Яр╕гр╕б тЖТ focus р╕Чр╕╡р╣Ир╕бр╕╖р╕н (р╕зр╕▒р╕Хр╕Цр╕╕р╣Гр╕Бр╕ер╣Й)
2. р╕бр╕╖р╕нр╕нр╕нр╕Б тЖТ focus р╕вр╕▒р╕Зр╕нр╕вр╕╣р╣Ир╕Чр╕╡р╣Ир╕гр╕░р╕вр╕░р╣Ар╕Фр╕┤р╕б (1 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡ - sharp!)
3. Auto-focus р╕Ыр╕гр╕▒р╕Ър╣Гр╕лр╕бр╣И тЖТ focus р╕Чр╕╡р╣Ир╕Юр╕╖р╣Йр╕Щр╕лр╕ер╕▒р╕З (р╕Юр╕гр╕┤р╕Бр╣Ар╕Ър╕ер╕н)

**First Fix Attempt: тЭМ Countdown**
- р╣Ар╕Юр╕┤р╣Ир╕б countdown 3 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡
- р╕Др╕┤р╕Фр╕зр╣Ир╕▓р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╣Ар╕зр╕ер╕▓р╣Гр╕лр╣Йр╕Бр╕ер╣Йр╕нр╕З stabilize
- р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М: **р╕вр╕▒р╕Зр╣Ар╕Ър╕ер╕нр╕нр╕вр╕╣р╣И**

**Root Cause: Missing aelock parameter**

---

### тЬЕ Solution: Auto-Exposure Lock (aelock=true)

**Modified GStreamer Pipeline:**

```python
# collect_dataset.py (Line 41)
return (
    f"nvarguscamerasrc sensor-id={sensor_id} "
    f"wbmode=0 "
    f"aelock=true "  # тЖР NEW: Locks auto-exposure & auto-focus
    f'exposuretimerange="{exposure_ns} {exposure_ns}" '
    f'gainrange="{gain} {gain}" '
    f"! "
    # ... rest of pipeline
)
```

**What aelock does:**
- р╕ер╣Зр╕нр╕Д auto-exposure (р╕Др╣Ир╕▓р╣Бр╕кр╕З)
- р╕ер╣Зр╕нр╕Д auto-focus (р╕Ир╕╕р╕Фр╣Вр╕Яр╕Бр╕▒р╕к)
- р╕Ыр╣Йр╕нр╕Зр╕Бр╕▒р╕Щр╣Др╕бр╣Ир╣Гр╕лр╣Йр╕Бр╕ер╣Йр╕нр╕Зр╕Ыр╕гр╕▒р╕Ър╣Ар╕нр╕Зр╕Вр╕Ур╕░р╕Цр╣Ир╕▓р╕в

---

### ЁЯзк Testing with test_aelock.py

**Created Tool:** `test_aelock.py`
- р╕зр╕▒р╕Фр╕Др╣Ир╕▓ sharpness р╕Фр╣Йр╕зр╕в Laplacian variance
- Real-time monitoring р╕Вр╕Ур╕░р╣Ар╕нр╕▓р╕бр╕╖р╕нр╣Ар╕Вр╣Йр╕▓-р╕нр╕нр╕Бр╣Ар╕Яр╕гр╕б
- р╕Др╕│р╕Щр╕зр╕У variation % (р╕вр╕┤р╣Ир╕Зр╕Хр╣Ир╕│ = р╕вр╕┤р╣Ир╕З stable)

**Test Results:**

**Test 1: р╕бр╕╖р╕нр╣Ар╕Вр╣Йр╕▓-р╕нр╕нр╕Бр╣Ар╕Яр╕гр╕бр╕лр╕ер╕▓р╕вр╕Др╕гр╕▒р╣Йр╕З**
```
Frames: 240
Avg Sharpness: 168.8
Variation: 11.5%
Result: тЪая╕П MODERATE (but expected - hand causes changes)
```

**Test 2: р╣Др╕бр╣Ир╕Вр╕вр╕▒р╕Ър╕бр╕╖р╕н (р╕зр╕▓р╕Зр╕Юр╕гр╕┤р╕Бр╕Щр╕┤р╣Ир╕З)**
```
Frames: 50
Avg Sharpness: 176.9
Variation: 0.7%
Result: тЬЕ EXCELLENT! Focus very stable
```

**Test 3: р╣Др╕бр╣Ир╕Вр╕вр╕▒р╕Ър╕бр╕╖р╕н (р╕Чр╕Фр╕кр╕нр╕Ър╕Лр╣Йр╕│)**
```
Frames: 189
Avg Sharpness: 172.7
Variation: 1.7%
Result: тЬЕ EXCELLENT!
```

**Conclusion:**
- тЬЕ `aelock=true` р╕Чр╕│р╕Зр╕▓р╕Щ!
- тЬЕ р╣Ар╕бр╕╖р╣Ир╕нр╕зр╕▓р╕Зр╕Юр╕гр╕┤р╕Бр╣Бр╕ер╣Йр╕з focus р╕Др╕Зр╕Чр╕╡р╣И (< 2% variation)
- тЬЕ р╕бр╕╖р╕нр╣Ар╕Вр╣Йр╕▓-р╕нр╕нр╕Б variation р╕кр╕╣р╕Зр╕Вр╕╢р╣Йр╕Щ (11-15%) р╣Бр╕Хр╣Ир╣Др╕бр╣Ир╣Ар╕Ыр╣Зр╕Щр╕Ыр╕▒р╕Нр╕лр╕▓ (р╣Ар╕Юр╕гр╕▓р╕░р╣Ар╕гр╕▓р╕Цр╣Ир╕▓р╕вр╕лр╕ер╕▒р╕Зр╕бр╕╖р╕нр╕нр╕нр╕Бр╣Бр╕ер╣Йр╕з)

---

### ЁЯОп Session 3.1 Test: Green Medium

**Test Dataset:**
```
Session: session3_green_medium
Peppers: 1 р╕Ьр╕е
Images: 12 р╕ар╕▓р╕Ю (12 р╕бр╕╕р╕б)

Workflow:
1. р╕зр╕▓р╕Зр╕Юр╕гр╕┤р╕Б тЖТ р╣Ар╕нр╕▓р╕бр╕╖р╕нр╕нр╕нр╕Бр╕Чр╕▒р╕Щр╕Чр╕╡
2. р╕гр╕н 3-5 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡ (р╣Гр╕лр╣Йр╕Бр╕ер╣Йр╕нр╕З stabilize)
3. р╕Бр╕Ф SPACE тЖТ countdown тЖТ ЁЯУ╕
4. р╕лр╕бр╕╕р╕Щр╕Юр╕гр╕┤р╕Б 30┬░ тЖТ repeat

р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М: тЬЕ р╕Кр╕▒р╕Фр╕бр╕▓р╕Б! texture р╣Ар╕лр╣Зр╕Щр╕Кр╕▒р╕Фр╣Ар╕Ир╕Щр╕Чр╕╕р╕Бр╕ар╕▓р╕Ю!
```

**User Confirmation:**
> "р╣Бр╕Хр╣Ир╕ар╕▓р╕Юр╕Вр╕нр╕З code р╕Щр╕╡р╣Йр╕Кр╕▒р╕Фр╕Др╕гр╕▒р╕Ъ р╣Ар╕Ыр╣Зр╕Щ texture р╕Вр╕нр╕Зр╕Ьр╕┤р╕зр╕Кр╕▒р╕Фр╕бр╕▓р╕Б"
> "р╕Ьр╕бр╕Ър╕▒р╕Щр╕Чр╕╢р╕Б session3_green_medium 12 р╕ар╕▓р╕Ю р╕Кр╕▒р╕Фр╕бр╕▓р╕Бр╣Др╕бр╣Ир╣Ар╕Ър╕ер╕нр╣Ар╕ер╕в"

---

### ЁЯФД Decision: Re-collect Dataset V2

**Comparison:**

| Version | Sessions | Images | Focus | Texture Visible | YOLO Ready |
|---------|----------|--------|-------|-----------------|------------|
| **V1 (OLD)** | 1-2 | 144 | тЭМ р╣Ар╕Ър╕ер╕н | тЭМ р╣Др╕бр╣Ир╕Кр╕▒р╕Ф | тЭМ No |
| **V2 (NEW)** | 1-2-3 | 192 | тЬЕ sharp | тЬЕ р╕Кр╕▒р╕Фр╕бр╕▓р╕Б | тЬЕ Yes |

**Why Re-collect?**
1. **Consistency:** р╕ар╕▓р╕Юр╣Ар╕Бр╣Ир╕▓ (р╣Ар╕Ър╕ер╕н) + р╕ар╕▓р╕Юр╣Гр╕лр╕бр╣И (р╕Кр╕▒р╕Ф) = dataset р╣Др╕бр╣Ир╕кр╕бр╣Ир╕│р╣Ар╕кр╕бр╕н
2. **YOLO Confusion:** model р╕Ир╕░р╣Ар╕гр╕╡р╕вр╕Щр╕гр╕╣р╣Й blurry features (р╕Ьр╕┤р╕Ф)
3. **Accuracy Impact:** р╕Др╕зр╕▓р╕бр╣Бр╕бр╣Ир╕Щр╕вр╕│р╕нр╕▓р╕Ир╕Хр╣Ир╕│р╕ер╕З 5-15%
4. **Time Cost:** Re-collect 60 р╕Щр╕▓р╕Чр╕╡ vs Train/Test/Debug (hours)

**Decision:** тЬЕ **Re-collect р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф (Dataset V2)**

---

### ЁЯУЛ Re-collection Plan (Dataset V2)

**Target: 192 images (16 peppers ├Ч 12 angles)**

**Session 1: Red Large Peppers**
- 8 peppers ├Ч 12 angles = 96 images
- Time: ~32 minutes

**Session 2: Red Defect Types**
- 4 peppers ├Ч 12 angles = 48 images
  - 2.1: Red rotten (р╣Ар╕Щр╣Ир╕▓)
  - 2.2: Red insect (р╣Бр╕бр╕ер╕Зр╣Ар╕Ир╕▓р╕░)
  - 2.3: Red deformed (р╕Зр╕н)
  - 2.4: Red wrinkled (р╣Ар╕лр╕╡р╣Ир╕вр╕з)
- Time: ~16 minutes

**Session 3: Green Varieties**
- 4 peppers ├Ч 12 angles = 48 images
  - 3.1: Green medium (р╕Вр╕Щр╕▓р╕Фр╕Бр╕ер╕▓р╕З)
  - 3.2: Green small (р╕Вр╕Щр╕▓р╕Фр╣Ар╕ер╣Зр╕Б)
  - 3.3: Green tiny (р╕Вр╕Щр╕▓р╕Фр╣Ар╕ер╣Зр╕Бр╕бр╕▓р╕Б)
  - 3.4: Green rotten (р╣Ар╕Щр╣Ир╕▓)
- Time: ~16 minutes

**Total Time: ~64 minutes (1 hour)**

---

### ЁЯЫая╕П New Tools Created

**1. `test_aelock.py`**
- Test focus stability with/without aelock
- Real-time sharpness monitoring
- Variation analysis

**2. `setup_new_dataset.sh`**
- Backup old dataset тЖТ `pepper_dataset_OLD_YYYYMMDD_HHMMSS/`
- Create new empty folder тЖТ `pepper_dataset/`

**3. `DATASET_RECOLLECTION_GUIDE.md`**
- Complete step-by-step guide
- All commands for 192 images
- Verification checklist

**4. `collect_all_commands.sh`**
- Interactive script
- All collection commands in one place
- Session-by-session display

---

### ЁЯУК Technical Improvements

**Before (V1):**
```python
# No aelock parameter
pipeline = (
    f"nvarguscamerasrc sensor-id={sensor_id} "
    f"wbmode=0 "
    f'exposuretimerange="{exposure_ns} {exposure_ns}" '
    # ...
)

Result: Auto-focus changes тЖТ blurry images
```

**After (V2):**
```python
# With aelock parameter
pipeline = (
    f"nvarguscamerasrc sensor-id={sensor_id} "
    f"wbmode=0 "
    f"aelock=true "  # тЖР Locks focus!
    f'exposuretimerange="{exposure_ns} {exposure_ns}" '
    # ...
)

Result: Fixed focus тЖТ sharp images with texture!
```

---

### тЬЕ Key Learnings

**Camera Behavior:**
1. IMX219 р╕бр╕╡ auto-focus р╣Бр╕ер╕░ auto-exposure р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ
2. Auto-focus р╕Ыр╕гр╕▒р╕Ър╕Хр╕▓р╕бр╕зр╕▒р╕Хр╕Цр╕╕р╕Чр╕╡р╣Ир╣Ар╕Вр╣Йр╕▓р╣Ар╕Яр╕гр╕б (р╕бр╕╖р╕н тЖТ р╕Юр╕гр╕┤р╕Б тЖТ р╕Юр╕╖р╣Йр╕Щр╕лр╕ер╕▒р╕З)
3. р╕Хр╣Йр╕нр╕Зр╣Гр╕Кр╣Й `aelock=true` р╣Ар╕Юр╕╖р╣Ир╕нр╕ер╣Зр╕нр╕Д focus

**Workflow Best Practices:**
1. р╕зр╕▓р╕Зр╕Юр╕гр╕┤р╕Б тЖТ р╣Ар╕нр╕▓р╕бр╕╖р╕нр╕нр╕нр╕Бр╕Чр╕▒р╕Щр╕Чр╕╡
2. р╕гр╕н 3-5 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡ (р╣Гр╕лр╣Й stabilize)
3. р╕Бр╕Ф SPACE тЖТ countdown тЖТ capture
4. р╕лр╕бр╕╕р╕Щр╕Юр╕гр╕┤р╕Бр╣Ар╕гр╣Зр╕зр╣Ж (2-3 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡)
5. Repeat 12 р╕бр╕╕р╕б

**Quality Criteria:**
- тЬЕ Texture visible (surface details clear)
- тЬЕ Sharp focus (no blur)
- тЬЕ Consistent lighting (no shadows)
- тЬЕ Centered object (middle of frame)

---

### ЁЯОп Current Status

**Dataset V1 (Backed up):**
- тЭМ 144 images with focus issues
- тЭМ Not suitable for YOLO training
- тЬЕ Backup location: `pepper_dataset_OLD_YYYYMMDD_HHMMSS/`

**Dataset V2 (In Progress):**
- тП│ Ready to collect: 192 images
- тЬЕ `aelock=true` enabled
- тЬЕ Test successful (Session 3.1: 12 sharp images)
- тЬЕ All tools and guides prepared

---

**Updated:** Oct 29, 2025 Evening
**Status:** ЁЯФД Ready for Dataset V2 Re-collection
**Next:** Execute re-collection plan (60 minutes) тЖТ Annotation тЖТ YOLO Training (Week 3)

